(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2540:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(8748),s(1506),s(5866);var a=s(3191),r=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8748)),"/home/finley/Finley-personal /simu-hub/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1506)),"/home/finley/Finley-personal /simu-hub/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/finley/Finley-personal /simu-hub/app/admin/page.tsx"],x="/admin/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2943:(e,t,s)=>{Promise.resolve().then(s.bind(s,8381))},5541:()=>{},6857:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},8381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(326),r=s(7577),i=s(5047),n=s(434);function l(){let e=(0,i.useRouter)(),[t,s]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[d,c]=(0,r.useState)([]),[x,p]=(0,r.useState)({status:"",search:""}),m=async()=>{try{let e=localStorage.getItem("adminToken"),t=await fetch("/api/admin/stats",{headers:{Authorization:`Bearer ${e}`}}),s=await t.json();s.success&&o(s.data)}catch(e){console.error("Failed to load stats:",e)}},h=(0,r.useCallback)(async()=>{s(!0);try{let e=localStorage.getItem("adminToken"),t=new URLSearchParams;x.status&&t.append("status",x.status),x.search&&t.append("search",x.search);let s=await fetch(`/api/orders?${t}`,{headers:{Authorization:`Bearer ${e}`}}),a=await s.json();a.success&&c(a.data)}catch(e){console.error("Failed to load orders:",e)}finally{s(!1)}},[x]),u=async(e,t)=>{try{let s=localStorage.getItem("adminToken"),a=await fetch(`/api/orders/${e}/status`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({status:t})}),r=await a.json();r.success?(await h(),await m(),"completed"===t?alert("Order marked as complete! Feedback request SMS sent to customer."):alert("Order status updated successfully!")):alert(r.error||"Failed to update order status")}catch(e){alert("Failed to update order status")}},b=e=>{let t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return l?(0,a.jsxs)("div",{className:"min-h-screen bg-black",children:[a.jsx("nav",{className:"fixed top-0 w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/5",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 md:px-12 h-20 flex items-center justify-between",children:[(0,a.jsxs)(n.default,{href:"/",className:"text-lg font-bold tracking-tighter uppercase font-display group",children:["Simu",a.jsx("span",{className:"text-beige text-xs align-top ml-1 opacity-80 group-hover:text-white transition-colors",children:"Hub"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[a.jsx("span",{className:"text-sm text-beige",children:"Orders"}),a.jsx(n.default,{href:"/admin/feedback",className:"text-sm text-gray-400 hover:text-beige transition-colors",children:"Order Feedback"}),a.jsx(n.default,{href:"/admin/general-feedback",className:"text-sm text-gray-400 hover:text-beige transition-colors",children:"General Feedback"}),a.jsx("button",{onClick:()=>{localStorage.removeItem("adminToken"),e.push("/admin/login")},className:"border border-white/20 px-4 py-2 text-sm uppercase tracking-wide hover:border-beige hover:text-beige transition-colors",children:"Logout"})]})]})}),a.jsx("div",{className:"pt-20 pb-20",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-6 md:px-12",children:[a.jsx("h1",{className:"font-display text-4xl md:text-5xl uppercase font-bold tracking-tighter mb-12",children:"Admin Dashboard"}),(0,a.jsxs)("section",{className:"mb-12",children:[a.jsx("h2",{className:"font-display text-xl uppercase font-bold tracking-tight mb-6",children:"Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[a.jsx("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-2",children:"Today's Orders"}),a.jsx("div",{className:"text-3xl font-display font-bold text-beige mb-2",children:l.today.total}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-gray-400",children:[(0,a.jsxs)("span",{children:["Pending: ",l.today.pending]}),(0,a.jsxs)("span",{children:["Completed: ",l.today.completed]})]})]}),(0,a.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[a.jsx("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-2",children:"This Week"}),a.jsx("div",{className:"text-3xl font-display font-bold text-beige mb-2",children:l.week.total}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-gray-400",children:[(0,a.jsxs)("span",{children:["Pending: ",l.week.pending]}),(0,a.jsxs)("span",{children:["Completed: ",l.week.completed]})]})]}),(0,a.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[a.jsx("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-2",children:"This Month"}),a.jsx("div",{className:"text-3xl font-display font-bold text-beige mb-2",children:l.month.total}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-gray-400",children:[(0,a.jsxs)("span",{children:["Pending: ",l.month.pending]}),(0,a.jsxs)("span",{children:["Completed: ",l.month.completed]})]})]})]})]}),a.jsx("section",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("select",{value:x.status,onChange:e=>p({...x,status:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"dispatched",children:"Dispatched"}),a.jsx("option",{value:"ready",children:"Ready"}),a.jsx("option",{value:"completed",children:"Completed"})]}),a.jsx("input",{type:"text",value:x.search,onChange:e=>p({...x,search:e.target.value}),className:"flex-1 bg-offblack border border-white/10 px-4 py-3 text-white placeholder-gray-600 custom-input",placeholder:"Search by order ID, name, or phone..."})]})}),(0,a.jsxs)("section",{className:"bg-offblack border border-white/10",children:[a.jsx("div",{className:"p-6 border-b border-white/10",children:a.jsx("h2",{className:"font-display text-xl uppercase font-bold tracking-tight",children:"Orders"})}),t?a.jsx("div",{className:"flex justify-center py-20",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-beige"})}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-black/50 border-b border-white/10",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Order ID"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Date"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Customer"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Phone"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Product"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Delivery"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Status"}),a.jsx("th",{className:"p-4 text-left text-xs font-mono text-beige uppercase tracking-wide",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-white/10",children:d.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"p-4 text-sm",children:e.order_reference}),a.jsx("td",{className:"p-4 text-sm text-gray-400",children:b(e.created_at)}),a.jsx("td",{className:"p-4 text-sm",children:e.customers?.name||"N/A"}),a.jsx("td",{className:"p-4 text-sm text-gray-400",children:e.customers?.phone||"N/A"}),(0,a.jsxs)("td",{className:"p-4 text-sm",children:[e.products?.brand," ",e.products?.model]}),a.jsx("td",{className:"p-4 text-sm text-gray-400",children:"doorstep"===e.delivery_method?"Doorstep":"Pickup"}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs uppercase tracking-wide ${"pending"===e.status?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":"completed"===e.status?"bg-beige/20 text-beige border border-beige/30":"bg-white/10 text-white border border-white/20"}`,children:e.status})}),a.jsx("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:["pending"===e.status&&a.jsx("button",{onClick:()=>u(e.id,"doorstep"===e.delivery_method?"dispatched":"ready"),className:"bg-beige text-black px-3 py-1 text-xs font-bold uppercase tracking-wide hover:bg-white transition-colors",children:"doorstep"===e.delivery_method?"Dispatch":"Ready"}),("dispatched"===e.status||"ready"===e.status)&&a.jsx("button",{onClick:()=>u(e.id,"completed"),className:"bg-beige text-black px-3 py-1 text-xs font-bold uppercase tracking-wide hover:bg-white transition-colors",title:"Mark as complete and send feedback request to customer",children:"Complete"}),"completed"===e.status&&a.jsx("span",{className:"text-xs text-gray-500 italic px-3 py-1",children:"Feedback requested"})]})})]},e.id))})]})})]})]})})]}):a.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-beige"})})}},5047:(e,t,s)=>{"use strict";var a=s(7389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},8748:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/home/finley/Finley-personal /simu-hub/app/admin/page.tsx#default`)},1506:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>r});var a=s(9510);s(7272);let r={title:"Simu Hub | Premium Mobile Phone Store",description:"Find Your Perfect Phone"};function i({children:e}){return a.jsx("html",{lang:"en",className:"scroll-smooth",children:a.jsx("body",{className:"font-sans antialiased text-white",children:e})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,471,434],()=>s(2540));module.exports=a})();