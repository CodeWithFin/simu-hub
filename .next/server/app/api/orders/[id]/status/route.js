"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/[id]/status/route";
exports.ids = ["app/api/orders/[id]/status/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_finley_Finley_personal_simu_hub_app_api_orders_id_status_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/orders/[id]/status/route.ts */ \"(rsc)/./app/api/orders/[id]/status/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/[id]/status/route\",\n        pathname: \"/api/orders/[id]/status\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/[id]/status/route\"\n    },\n    resolvedPagePath: \"/home/finley/Finley-personal /simu-hub/app/api/orders/[id]/status/route.ts\",\n    nextConfigOutput,\n    userland: _home_finley_Finley_personal_simu_hub_app_api_orders_id_status_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/orders/[id]/status/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkYlNUJpZCU1RCUyRnN0YXR1cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGb3JkZXJzJTJGJTVCaWQlNUQlMkZzdGF0dXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZvcmRlcnMlMkYlNUJpZCU1RCUyRnN0YXR1cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGZmlubGV5JTJGRmlubGV5LXBlcnNvbmFsJTIwJTJGc2ltdS1odWIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZmaW5sZXklMkZGaW5sZXktcGVyc29uYWwlMjAlMkZzaW11LWh1YiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaW11LWh1Yi8/YTlmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9maW5sZXkvRmlubGV5LXBlcnNvbmFsIC9zaW11LWh1Yi9hcHAvYXBpL29yZGVycy9baWRdL3N0YXR1cy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvb3JkZXJzL1tpZF0vc3RhdHVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvb3JkZXJzL1tpZF0vc3RhdHVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9vcmRlcnMvW2lkXS9zdGF0dXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9maW5sZXkvRmlubGV5LXBlcnNvbmFsIC9zaW11LWh1Yi9hcHAvYXBpL29yZGVycy9baWRdL3N0YXR1cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvb3JkZXJzL1tpZF0vc3RhdHVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/orders/[id]/status/route.ts":
/*!*********************************************!*\
  !*** ./app/api/orders/[id]/status/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/lib/supabase */ \"(rsc)/./app/lib/supabase.ts\");\n/* harmony import */ var _app_lib_sms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/lib/sms */ \"(rsc)/./app/lib/sms.ts\");\n\n\n\nasync function PATCH(request, { params }) {\n    try {\n        const { id } = params;\n        const body = await request.json();\n        const { status } = body;\n        if (![\n            \"pending\",\n            \"dispatched\",\n            \"ready\",\n            \"completed\",\n            \"cancelled\"\n        ].includes(status)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid status\"\n            }, {\n                status: 400\n            });\n        }\n        // Get order with customer and product details\n        const { data: order, error: orderError } = await _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"orders\").select(`\n        *,\n        customers:customer_id (*),\n        products:product_id (*)\n      `).eq(\"id\", id).single();\n        if (orderError || !order) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Order not found\"\n            }, {\n                status: 404\n            });\n        }\n        const updateData = {\n            status\n        };\n        if (status === \"dispatched\") {\n            updateData.dispatched_at = new Date().toISOString();\n        }\n        if (status === \"completed\") {\n            updateData.completed_at = new Date().toISOString();\n        }\n        const { data: updatedOrder, error: updateError } = await _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"orders\").update(updateData).eq(\"id\", id).select().single();\n        if (updateError) throw updateError;\n        // Send SMS notifications\n        const customer = order.customers;\n        const product = order.products;\n        if (status === \"dispatched\" && order.delivery_method === \"doorstep\") {\n            const message = `Your order #${order.order_reference} has been dispatched!\n${product.brand} ${product.model}\nExpected delivery: Within 24 hours\nContact: ${process.env.SHOP_PHONE || \"N/A\"}`;\n            await (0,_app_lib_sms__WEBPACK_IMPORTED_MODULE_2__.sendSMS)(customer.phone, message, order.id);\n        }\n        if (status === \"ready\" && order.delivery_method === \"pickup\") {\n            const message = `Your order #${order.order_reference} is ready for pickup!\n${product.brand} ${product.model}\nPickup at: ${process.env.SHOP_ADDRESS || \"Store\"}\nHours: ${process.env.SHOP_HOURS || \"Mon-Sat: 9AM-6PM\"}\nBring: Order ID and valid ID\nContact: ${process.env.SHOP_PHONE || \"N/A\"}`;\n            await (0,_app_lib_sms__WEBPACK_IMPORTED_MODULE_2__.sendSMS)(customer.phone, message, order.id);\n        }\n        // Automatically send feedback request when order is completed\n        if (status === \"completed\") {\n            const feedbackLink = `${\"http://localhost:3000\" || 0}/feedback/${order.id}`;\n            const message = `Thank you for your purchase from ${process.env.SHOP_NAME || \"Simu Hub\"}!\nHow was your experience?\n${product.brand} ${product.model}\nShare your feedback: ${feedbackLink}\nYour opinion helps us improve!`;\n            console.log(\"Sending feedback request SMS to customer:\", customer.phone);\n            const smsResult = await (0,_app_lib_sms__WEBPACK_IMPORTED_MODULE_2__.sendSMS)(customer.phone, message, order.id);\n            console.log(\"Feedback request SMS result:\", smsResult);\n            if (!smsResult.success) {\n                console.error(\"Failed to send feedback request SMS:\", smsResult.error);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: updatedOrder\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL29yZGVycy9baWRdL3N0YXR1cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ1Y7QUFDTjtBQUVoQyxlQUFlRyxNQUNwQkMsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUE4QjtJQUV0QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxFQUFFLEVBQUUsR0FBR0Q7UUFDZixNQUFNRSxPQUFPLE1BQU1ILFFBQVFJLElBQUk7UUFDL0IsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR0Y7UUFFbkIsSUFBSSxDQUFDO1lBQUM7WUFBVztZQUFjO1lBQVM7WUFBYTtTQUFZLENBQUNHLFFBQVEsQ0FBQ0QsU0FBUztZQUNsRixPQUFPVCxxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtnQkFBRUcsU0FBUztnQkFBT0MsT0FBTztZQUFpQixHQUMxQztnQkFBRUgsUUFBUTtZQUFJO1FBRWxCO1FBRUEsOENBQThDO1FBQzlDLE1BQU0sRUFBRUksTUFBTUMsS0FBSyxFQUFFRixPQUFPRyxVQUFVLEVBQUUsR0FBRyxNQUFNZCx1REFBUUEsQ0FDdERlLElBQUksQ0FBQyxVQUNMQyxNQUFNLENBQUMsQ0FBQzs7OztNQUlULENBQUMsRUFDQUMsRUFBRSxDQUFDLE1BQU1aLElBQ1RhLE1BQU07UUFFVCxJQUFJSixjQUFjLENBQUNELE9BQU87WUFDeEIsT0FBT2QscURBQVlBLENBQUNRLElBQUksQ0FDdEI7Z0JBQUVHLFNBQVM7Z0JBQU9DLE9BQU87WUFBa0IsR0FDM0M7Z0JBQUVILFFBQVE7WUFBSTtRQUVsQjtRQUVBLE1BQU1XLGFBQWtCO1lBQUVYO1FBQU87UUFFakMsSUFBSUEsV0FBVyxjQUFjO1lBQzNCVyxXQUFXQyxhQUFhLEdBQUcsSUFBSUMsT0FBT0MsV0FBVztRQUNuRDtRQUVBLElBQUlkLFdBQVcsYUFBYTtZQUMxQlcsV0FBV0ksWUFBWSxHQUFHLElBQUlGLE9BQU9DLFdBQVc7UUFDbEQ7UUFFQSxNQUFNLEVBQUVWLE1BQU1ZLFlBQVksRUFBRWIsT0FBT2MsV0FBVyxFQUFFLEdBQUcsTUFBTXpCLHVEQUFRQSxDQUM5RGUsSUFBSSxDQUFDLFVBQ0xXLE1BQU0sQ0FBQ1AsWUFDUEYsRUFBRSxDQUFDLE1BQU1aLElBQ1RXLE1BQU0sR0FDTkUsTUFBTTtRQUVULElBQUlPLGFBQWEsTUFBTUE7UUFFdkIseUJBQXlCO1FBQ3pCLE1BQU1FLFdBQVcsTUFBZUMsU0FBUztRQUN6QyxNQUFNQyxVQUFVLE1BQWVDLFFBQVE7UUFFdkMsSUFBSXRCLFdBQVcsZ0JBQWdCSyxNQUFNa0IsZUFBZSxLQUFLLFlBQVk7WUFDbkUsTUFBTUMsVUFBVSxDQUFDLFlBQVksRUFBRW5CLE1BQU1vQixlQUFlLENBQUM7QUFDM0QsRUFBRUosUUFBUUssS0FBSyxDQUFDLENBQUMsRUFBRUwsUUFBUU0sS0FBSyxDQUFDOztTQUV4QixFQUFFQyxRQUFRQyxHQUFHLENBQUNDLFVBQVUsSUFBSSxNQUFNLENBQUM7WUFFdEMsTUFBTXJDLHFEQUFPQSxDQUFDMEIsU0FBU1ksS0FBSyxFQUFFUCxTQUFTbkIsTUFBTVIsRUFBRTtRQUNqRDtRQUVBLElBQUlHLFdBQVcsV0FBV0ssTUFBTWtCLGVBQWUsS0FBSyxVQUFVO1lBQzVELE1BQU1DLFVBQVUsQ0FBQyxZQUFZLEVBQUVuQixNQUFNb0IsZUFBZSxDQUFDO0FBQzNELEVBQUVKLFFBQVFLLEtBQUssQ0FBQyxDQUFDLEVBQUVMLFFBQVFNLEtBQUssQ0FBQztXQUN0QixFQUFFQyxRQUFRQyxHQUFHLENBQUNHLFlBQVksSUFBSSxRQUFRO09BQzFDLEVBQUVKLFFBQVFDLEdBQUcsQ0FBQ0ksVUFBVSxJQUFJLG1CQUFtQjs7U0FFN0MsRUFBRUwsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUksTUFBTSxDQUFDO1lBRXRDLE1BQU1yQyxxREFBT0EsQ0FBQzBCLFNBQVNZLEtBQUssRUFBRVAsU0FBU25CLE1BQU1SLEVBQUU7UUFDakQ7UUFFQSw4REFBOEQ7UUFDOUQsSUFBSUcsV0FBVyxhQUFhO1lBQzFCLE1BQU1rQyxlQUFlLENBQUMsRUFBRU4sdUJBQStCLElBQUksRUFBd0IsVUFBVSxFQUFFdkIsTUFBTVIsRUFBRSxDQUFDLENBQUM7WUFDekcsTUFBTTJCLFVBQVUsQ0FBQyxpQ0FBaUMsRUFBRUksUUFBUUMsR0FBRyxDQUFDTyxTQUFTLElBQUksV0FBVzs7QUFFOUYsRUFBRWYsUUFBUUssS0FBSyxDQUFDLENBQUMsRUFBRUwsUUFBUU0sS0FBSyxDQUFDO3FCQUNaLEVBQUVPLGFBQWE7OEJBQ04sQ0FBQztZQUV6QkcsUUFBUUMsR0FBRyxDQUFDLDZDQUE2Q25CLFNBQVNZLEtBQUs7WUFDdkUsTUFBTVEsWUFBWSxNQUFNOUMscURBQU9BLENBQUMwQixTQUFTWSxLQUFLLEVBQUVQLFNBQVNuQixNQUFNUixFQUFFO1lBQ2pFd0MsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0M7WUFFNUMsSUFBSSxDQUFDQSxVQUFVckMsT0FBTyxFQUFFO2dCQUN0Qm1DLFFBQVFsQyxLQUFLLENBQUMsd0NBQXdDb0MsVUFBVXBDLEtBQUs7WUFDdkU7UUFDRjtRQUVBLE9BQU9aLHFEQUFZQSxDQUFDUSxJQUFJLENBQUM7WUFBRUcsU0FBUztZQUFNRSxNQUFNWTtRQUFhO0lBQy9ELEVBQUUsT0FBT2IsT0FBWTtRQUNuQixPQUFPWixxREFBWUEsQ0FBQ1EsSUFBSSxDQUN0QjtZQUFFRyxTQUFTO1lBQU9DLE9BQU9BLE1BQU1xQixPQUFPO1FBQUMsR0FDdkM7WUFBRXhCLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2ltdS1odWIvLi9hcHAvYXBpL29yZGVycy9baWRdL3N0YXR1cy9yb3V0ZS50cz82ZWI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSAnQC9hcHAvbGliL3N1cGFiYXNlJ1xuaW1wb3J0IHsgc2VuZFNNUyB9IGZyb20gJ0AvYXBwL2xpYi9zbXMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGlkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGlkIH0gPSBwYXJhbXNcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IHN0YXR1cyB9ID0gYm9keVxuICAgIFxuICAgIGlmICghWydwZW5kaW5nJywgJ2Rpc3BhdGNoZWQnLCAncmVhZHknLCAnY29tcGxldGVkJywgJ2NhbmNlbGxlZCddLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdJbnZhbGlkIHN0YXR1cycgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCBvcmRlciB3aXRoIGN1c3RvbWVyIGFuZCBwcm9kdWN0IGRldGFpbHNcbiAgICBjb25zdCB7IGRhdGE6IG9yZGVyLCBlcnJvcjogb3JkZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGN1c3RvbWVyczpjdXN0b21lcl9pZCAoKiksXG4gICAgICAgIHByb2R1Y3RzOnByb2R1Y3RfaWQgKCopXG4gICAgICBgKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNpbmdsZSgpXG4gICAgXG4gICAgaWYgKG9yZGVyRXJyb3IgfHwgIW9yZGVyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnT3JkZXIgbm90IGZvdW5kJyB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0geyBzdGF0dXMgfVxuICAgIFxuICAgIGlmIChzdGF0dXMgPT09ICdkaXNwYXRjaGVkJykge1xuICAgICAgdXBkYXRlRGF0YS5kaXNwYXRjaGVkX2F0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfVxuICAgIFxuICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICB1cGRhdGVEYXRhLmNvbXBsZXRlZF9hdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRPcmRlciwgZXJyb3I6IHVwZGF0ZUVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ29yZGVycycpXG4gICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKVxuICAgIFxuICAgIGlmICh1cGRhdGVFcnJvcikgdGhyb3cgdXBkYXRlRXJyb3JcbiAgICBcbiAgICAvLyBTZW5kIFNNUyBub3RpZmljYXRpb25zXG4gICAgY29uc3QgY3VzdG9tZXIgPSAob3JkZXIgYXMgYW55KS5jdXN0b21lcnNcbiAgICBjb25zdCBwcm9kdWN0ID0gKG9yZGVyIGFzIGFueSkucHJvZHVjdHNcbiAgICBcbiAgICBpZiAoc3RhdHVzID09PSAnZGlzcGF0Y2hlZCcgJiYgb3JkZXIuZGVsaXZlcnlfbWV0aG9kID09PSAnZG9vcnN0ZXAnKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYFlvdXIgb3JkZXIgIyR7b3JkZXIub3JkZXJfcmVmZXJlbmNlfSBoYXMgYmVlbiBkaXNwYXRjaGVkIVxuJHtwcm9kdWN0LmJyYW5kfSAke3Byb2R1Y3QubW9kZWx9XG5FeHBlY3RlZCBkZWxpdmVyeTogV2l0aGluIDI0IGhvdXJzXG5Db250YWN0OiAke3Byb2Nlc3MuZW52LlNIT1BfUEhPTkUgfHwgJ04vQSd9YFxuICAgICAgXG4gICAgICBhd2FpdCBzZW5kU01TKGN1c3RvbWVyLnBob25lLCBtZXNzYWdlLCBvcmRlci5pZClcbiAgICB9XG4gICAgXG4gICAgaWYgKHN0YXR1cyA9PT0gJ3JlYWR5JyAmJiBvcmRlci5kZWxpdmVyeV9tZXRob2QgPT09ICdwaWNrdXAnKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYFlvdXIgb3JkZXIgIyR7b3JkZXIub3JkZXJfcmVmZXJlbmNlfSBpcyByZWFkeSBmb3IgcGlja3VwIVxuJHtwcm9kdWN0LmJyYW5kfSAke3Byb2R1Y3QubW9kZWx9XG5QaWNrdXAgYXQ6ICR7cHJvY2Vzcy5lbnYuU0hPUF9BRERSRVNTIHx8ICdTdG9yZSd9XG5Ib3VyczogJHtwcm9jZXNzLmVudi5TSE9QX0hPVVJTIHx8ICdNb24tU2F0OiA5QU0tNlBNJ31cbkJyaW5nOiBPcmRlciBJRCBhbmQgdmFsaWQgSURcbkNvbnRhY3Q6ICR7cHJvY2Vzcy5lbnYuU0hPUF9QSE9ORSB8fCAnTi9BJ31gXG4gICAgICBcbiAgICAgIGF3YWl0IHNlbmRTTVMoY3VzdG9tZXIucGhvbmUsIG1lc3NhZ2UsIG9yZGVyLmlkKVxuICAgIH1cbiAgICBcbiAgICAvLyBBdXRvbWF0aWNhbGx5IHNlbmQgZmVlZGJhY2sgcmVxdWVzdCB3aGVuIG9yZGVyIGlzIGNvbXBsZXRlZFxuICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICBjb25zdCBmZWVkYmFja0xpbmsgPSBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnfS9mZWVkYmFjay8ke29yZGVyLmlkfWBcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBgVGhhbmsgeW91IGZvciB5b3VyIHB1cmNoYXNlIGZyb20gJHtwcm9jZXNzLmVudi5TSE9QX05BTUUgfHwgJ1NpbXUgSHViJ30hXG5Ib3cgd2FzIHlvdXIgZXhwZXJpZW5jZT9cbiR7cHJvZHVjdC5icmFuZH0gJHtwcm9kdWN0Lm1vZGVsfVxuU2hhcmUgeW91ciBmZWVkYmFjazogJHtmZWVkYmFja0xpbmt9XG5Zb3VyIG9waW5pb24gaGVscHMgdXMgaW1wcm92ZSFgXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdTZW5kaW5nIGZlZWRiYWNrIHJlcXVlc3QgU01TIHRvIGN1c3RvbWVyOicsIGN1c3RvbWVyLnBob25lKVxuICAgICAgY29uc3Qgc21zUmVzdWx0ID0gYXdhaXQgc2VuZFNNUyhjdXN0b21lci5waG9uZSwgbWVzc2FnZSwgb3JkZXIuaWQpXG4gICAgICBjb25zb2xlLmxvZygnRmVlZGJhY2sgcmVxdWVzdCBTTVMgcmVzdWx0OicsIHNtc1Jlc3VsdClcbiAgICAgIFxuICAgICAgaWYgKCFzbXNSZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2VuZCBmZWVkYmFjayByZXF1ZXN0IFNNUzonLCBzbXNSZXN1bHQuZXJyb3IpXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHVwZGF0ZWRPcmRlciB9KVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInN1cGFiYXNlIiwic2VuZFNNUyIsIlBBVENIIiwicmVxdWVzdCIsInBhcmFtcyIsImlkIiwiYm9keSIsImpzb24iLCJzdGF0dXMiLCJpbmNsdWRlcyIsInN1Y2Nlc3MiLCJlcnJvciIsImRhdGEiLCJvcmRlciIsIm9yZGVyRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJ1cGRhdGVEYXRhIiwiZGlzcGF0Y2hlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImNvbXBsZXRlZF9hdCIsInVwZGF0ZWRPcmRlciIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwiY3VzdG9tZXIiLCJjdXN0b21lcnMiLCJwcm9kdWN0IiwicHJvZHVjdHMiLCJkZWxpdmVyeV9tZXRob2QiLCJtZXNzYWdlIiwib3JkZXJfcmVmZXJlbmNlIiwiYnJhbmQiLCJtb2RlbCIsInByb2Nlc3MiLCJlbnYiLCJTSE9QX1BIT05FIiwicGhvbmUiLCJTSE9QX0FERFJFU1MiLCJTSE9QX0hPVVJTIiwiZmVlZGJhY2tMaW5rIiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsIlNIT1BfTkFNRSIsImNvbnNvbGUiLCJsb2ciLCJzbXNSZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/orders/[id]/status/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/sms.ts":
/*!************************!*\
  !*** ./app/lib/sms.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendSMS: () => (/* binding */ sendSMS)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(rsc)/./app/lib/supabase.ts\");\n\nconst sendSMS = async (to, message, orderId)=>{\n    try {\n        // Tilil API configuration\n        const smsUrl = process.env.SMS_ENDPOINT || process.env.TILIL_SMS_URL || \"https://api.tililtech.com/sms/v3/sendsms\";\n        const apiKey = process.env.TILIL_API_KEY;\n        const shortcode = process.env.TILIL_SHORTCODE || process.env.TILIL_SENDER_ID || \"SIMUHUB\";\n        if (!apiKey) {\n            console.warn(\"Tilil API key not configured. SMS not sent.\");\n            console.warn(\"Required: TILIL_API_KEY\");\n            return {\n                success: false,\n                error: \"SMS service not configured\"\n            };\n        }\n        // Format phone number - Tilil accepts multiple formats\n        // Remove + prefix if present (Tilil accepts local or international without +)\n        const formattedPhone = to.replace(/\\s+/g, \"\").replace(/^\\+/, \"\");\n        console.log(\"Sending SMS via Tilil to:\", formattedPhone);\n        console.log(\"Using endpoint:\", smsUrl);\n        console.log(\"Using shortcode:\", shortcode);\n        // Tilil API v3 request format (from official documentation)\n        const requestBody = {\n            api_key: apiKey,\n            service: 0,\n            mobile: formattedPhone,\n            response_type: \"json\",\n            shortcode: shortcode,\n            message: message // SMS content\n        };\n        console.log(\"Tilil SMS Request:\", JSON.stringify({\n            ...requestBody,\n            api_key: `${apiKey.substring(0, 10)}...`,\n            message: `${message.substring(0, 50)}...`\n        }, null, 2));\n        const response = await fetch(smsUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(requestBody)\n        });\n        const result = await response.json();\n        console.log(\"Tilil SMS response status:\", response.status);\n        console.log(\"Tilil SMS response:\", JSON.stringify(result, null, 2));\n        // Tilil returns an array of results (even for single SMS)\n        const responseData = Array.isArray(result) ? result[0] : result;\n        // Check for error status codes\n        // 1000 or 1 = Success\n        // 1001 = Invalid sender name/shortcode\n        // 1003 = Invalid mobile number\n        // 1004 = Insufficient credits\n        // 1006 = Invalid credentials/API key\n        // 1013 = Invalid API key\n        if (responseData && responseData.status_code && responseData.status_code !== \"1000\" && responseData.status_code !== \"1\" && responseData.status_code !== 1000 && responseData.status_code !== 1) {\n            const errorMsg = responseData.status_desc || \"SMS sending failed\";\n            console.error(\"❌ Tilil SMS error:\", errorMsg);\n            console.error(\"Status code:\", responseData.status_code);\n            console.error(\"Full response:\", responseData);\n            // Provide helpful error messages\n            if (responseData.status_code === \"1001\") {\n                console.error(\"⚠️  SENDER ID ERROR: The shortcode/sender ID is not registered with Tilil\");\n                console.error(\"\\uD83D\\uDCA1 Solution: Log into your Tilil dashboard and verify your approved sender IDs\");\n                console.error(\"Current shortcode:\", shortcode);\n            } else if (responseData.status_code === \"1006\" || responseData.status_code === \"1013\") {\n                console.error(\"⚠️  API KEY ERROR: The API key is invalid or expired\");\n                console.error(\"\\uD83D\\uDCA1 Solution: Verify your TILIL_API_KEY in .env.local\");\n            } else if (responseData.status_code === \"1003\") {\n                console.error(\"⚠️  PHONE NUMBER ERROR: Invalid mobile number format\");\n                console.error(\"Current number:\", formattedPhone);\n            } else if (responseData.status_code === \"1004\") {\n                console.error(\"⚠️  CREDIT ERROR: Insufficient SMS credits\");\n                console.error(\"\\uD83D\\uDCA1 Solution: Top up your Tilil account\");\n            }\n            // Log failed SMS to database\n            if (orderId) {\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                    order_id: orderId,\n                    recipient_phone: to,\n                    message_type: \"notification\",\n                    message_content: message,\n                    status: \"failed\",\n                    response: JSON.stringify(result)\n                });\n            }\n            return {\n                success: false,\n                error: errorMsg\n            };\n        }\n        // Check HTTP status\n        if (!response.ok) {\n            console.error(\"❌ Tilil SMS HTTP error:\", result);\n            // Log failed SMS\n            if (orderId) {\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                    order_id: orderId,\n                    recipient_phone: to,\n                    message_type: \"notification\",\n                    message_content: message,\n                    status: \"failed\",\n                    response: JSON.stringify(result)\n                });\n            }\n            return {\n                success: false,\n                error: result.message || \"SMS sending failed\"\n            };\n        }\n        // Success!\n        console.log(\"✅ SMS sent successfully!\");\n        console.log(\"Message ID:\", responseData.message_id);\n        console.log(\"Credit balance:\", responseData.credit_balance);\n        // Log successful SMS to database\n        if (orderId) {\n            await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                order_id: orderId,\n                recipient_phone: to,\n                message_type: \"notification\",\n                message_content: message,\n                status: \"sent\",\n                sent_at: new Date().toISOString(),\n                response: JSON.stringify(result)\n            });\n        }\n        return {\n            success: true,\n            data: result\n        };\n    } catch (error) {\n        console.error(\"❌ SMS sending exception:\", error);\n        // Log failed SMS\n        if (orderId) {\n            await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                order_id: orderId,\n                recipient_phone: to,\n                message_type: \"notification\",\n                message_content: message,\n                status: \"failed\",\n                response: JSON.stringify({\n                    error: error.message\n                })\n            });\n        }\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bERwQyxRQUFRTSxHQUFHLENBQUMsbUJBQW1CaUIsYUFBYWMsY0FBYztRQUUxRCxpQ0FBaUM7UUFDakMsSUFBSWhELFNBQVM7WUFDWCxNQUFNSiwrQ0FBUUEsQ0FBQzRDLElBQUksQ0FBQyxZQUFZQyxNQUFNLENBQUM7Z0JBQ3JDQyxVQUFVMUM7Z0JBQ1YyQyxpQkFBaUI3QztnQkFDakI4QyxjQUFjO2dCQUNkQyxpQkFBaUI5QztnQkFDakJrQyxRQUFRO2dCQUNSZ0IsU0FBUyxJQUFJQyxPQUFPQyxXQUFXO2dCQUMvQnpCLFVBQVVILEtBQUtDLFNBQVMsQ0FBQ087WUFDM0I7UUFDRjtRQUVBLE9BQU87WUFBRWxCLFNBQVM7WUFBTXVDLE1BQU1yQjtRQUFPO0lBQ3ZDLEVBQUUsT0FBT2pCLE9BQVk7UUFDbkJILFFBQVFHLEtBQUssQ0FBQyw0QkFBNEJBO1FBRTFDLGlCQUFpQjtRQUNqQixJQUFJZCxTQUFTO1lBQ1gsTUFBTUosK0NBQVFBLENBQUM0QyxJQUFJLENBQUMsWUFBWUMsTUFBTSxDQUFDO2dCQUNyQ0MsVUFBVTFDO2dCQUNWMkMsaUJBQWlCN0M7Z0JBQ2pCOEMsY0FBYztnQkFDZEMsaUJBQWlCOUM7Z0JBQ2pCa0MsUUFBUTtnQkFDUlAsVUFBVUgsS0FBS0MsU0FBUyxDQUFDO29CQUFFVixPQUFPQSxNQUFNZixPQUFPO2dCQUFDO1lBQ2xEO1FBQ0Y7UUFFQSxPQUFPO1lBQUVjLFNBQVM7WUFBT0MsT0FBT0EsTUFBTWYsT0FBTztRQUFDO0lBQ2hEO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbXUtaHViLy4vYXBwL2xpYi9zbXMudHM/Mjc1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4vc3VwYWJhc2UnXG5cbmV4cG9ydCBjb25zdCBzZW5kU01TID0gYXN5bmMgKHRvOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb3JkZXJJZD86IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIC8vIFRpbGlsIEFQSSBjb25maWd1cmF0aW9uXG4gICAgY29uc3Qgc21zVXJsID0gcHJvY2Vzcy5lbnYuU01TX0VORFBPSU5UIHx8IHByb2Nlc3MuZW52LlRJTElMX1NNU19VUkwgfHwgJ2h0dHBzOi8vYXBpLnRpbGlsdGVjaC5jb20vc21zL3YzL3NlbmRzbXMnXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuVElMSUxfQVBJX0tFWVxuICAgIGNvbnN0IHNob3J0Y29kZSA9IHByb2Nlc3MuZW52LlRJTElMX1NIT1JUQ09ERSB8fCBwcm9jZXNzLmVudi5USUxJTF9TRU5ERVJfSUQgfHwgJ1NJTVVIVUInXG4gICAgXG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIGNvbnNvbGUud2FybignVGlsaWwgQVBJIGtleSBub3QgY29uZmlndXJlZC4gU01TIG5vdCBzZW50LicpXG4gICAgICBjb25zb2xlLndhcm4oJ1JlcXVpcmVkOiBUSUxJTF9BUElfS0VZJylcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1NNUyBzZXJ2aWNlIG5vdCBjb25maWd1cmVkJyB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZvcm1hdCBwaG9uZSBudW1iZXIgLSBUaWxpbCBhY2NlcHRzIG11bHRpcGxlIGZvcm1hdHNcbiAgICAvLyBSZW1vdmUgKyBwcmVmaXggaWYgcHJlc2VudCAoVGlsaWwgYWNjZXB0cyBsb2NhbCBvciBpbnRlcm5hdGlvbmFsIHdpdGhvdXQgKylcbiAgICBjb25zdCBmb3JtYXR0ZWRQaG9uZSA9IHRvLnJlcGxhY2UoL1xccysvZywgJycpLnJlcGxhY2UoL15cXCsvLCAnJylcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyBTTVMgdmlhIFRpbGlsIHRvOicsIGZvcm1hdHRlZFBob25lKVxuICAgIGNvbnNvbGUubG9nKCdVc2luZyBlbmRwb2ludDonLCBzbXNVcmwpXG4gICAgY29uc29sZS5sb2coJ1VzaW5nIHNob3J0Y29kZTonLCBzaG9ydGNvZGUpXG4gICAgXG4gICAgLy8gVGlsaWwgQVBJIHYzIHJlcXVlc3QgZm9ybWF0IChmcm9tIG9mZmljaWFsIGRvY3VtZW50YXRpb24pXG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBhcGlfa2V5OiBhcGlLZXksXG4gICAgICBzZXJ2aWNlOiAwLCAgICAgICAgICAgICAgICAgICAgLy8gMCA9IGJ1bGsgU01TIHNlcnZpY2VcbiAgICAgIG1vYmlsZTogZm9ybWF0dGVkUGhvbmUsICAgICAgICAvLyByZWNpcGllbnQgcGhvbmUgbnVtYmVyXG4gICAgICByZXNwb25zZV90eXBlOiBcImpzb25cIiwgICAgICAgICAvLyByZXNwb25zZSBmb3JtYXRcbiAgICAgIHNob3J0Y29kZTogc2hvcnRjb2RlLCAgICAgICAgICAvLyBzZW5kZXIgSUQvbmFtZVxuICAgICAgbWVzc2FnZTogbWVzc2FnZSAgICAgICAgICAgICAgIC8vIFNNUyBjb250ZW50XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdUaWxpbCBTTVMgUmVxdWVzdDonLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgIGFwaV9rZXk6IGAke2FwaUtleS5zdWJzdHJpbmcoMCwgMTApfS4uLmAsXG4gICAgICBtZXNzYWdlOiBgJHttZXNzYWdlLnN1YnN0cmluZygwLCA1MCl9Li4uYFxuICAgIH0sIG51bGwsIDIpKVxuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc21zVXJsLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVGlsaWwgU01TIHJlc3BvbnNlIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpXG4gICAgY29uc29sZS5sb2coJ1RpbGlsIFNNUyByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpKVxuXG4gICAgLy8gVGlsaWwgcmV0dXJucyBhbiBhcnJheSBvZiByZXN1bHRzIChldmVuIGZvciBzaW5nbGUgU01TKVxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdFswXSA6IHJlc3VsdFxuICAgIFxuICAgIC8vIENoZWNrIGZvciBlcnJvciBzdGF0dXMgY29kZXNcbiAgICAvLyAxMDAwIG9yIDEgPSBTdWNjZXNzXG4gICAgLy8gMTAwMSA9IEludmFsaWQgc2VuZGVyIG5hbWUvc2hvcnRjb2RlXG4gICAgLy8gMTAwMyA9IEludmFsaWQgbW9iaWxlIG51bWJlclxuICAgIC8vIDEwMDQgPSBJbnN1ZmZpY2llbnQgY3JlZGl0c1xuICAgIC8vIDEwMDYgPSBJbnZhbGlkIGNyZWRlbnRpYWxzL0FQSSBrZXlcbiAgICAvLyAxMDEzID0gSW52YWxpZCBBUEkga2V5XG4gICAgaWYgKHJlc3BvbnNlRGF0YSAmJiByZXNwb25zZURhdGEuc3RhdHVzX2NvZGUgJiYgXG4gICAgICAgIHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSAhPT0gJzEwMDAnICYmIFxuICAgICAgICByZXNwb25zZURhdGEuc3RhdHVzX2NvZGUgIT09ICcxJyAmJlxuICAgICAgICByZXNwb25zZURhdGEuc3RhdHVzX2NvZGUgIT09IDEwMDAgJiZcbiAgICAgICAgcmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlICE9PSAxKSB7XG4gICAgICBcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gcmVzcG9uc2VEYXRhLnN0YXR1c19kZXNjIHx8ICdTTVMgc2VuZGluZyBmYWlsZWQnXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgVGlsaWwgU01TIGVycm9yOicsIGVycm9yTXNnKVxuICAgICAgY29uc29sZS5lcnJvcignU3RhdHVzIGNvZGU6JywgcmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlKVxuICAgICAgY29uc29sZS5lcnJvcignRnVsbCByZXNwb25zZTonLCByZXNwb25zZURhdGEpXG4gICAgICBcbiAgICAgIC8vIFByb3ZpZGUgaGVscGZ1bCBlcnJvciBtZXNzYWdlc1xuICAgICAgaWYgKHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSA9PT0gJzEwMDEnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyAgU0VOREVSIElEIEVSUk9SOiBUaGUgc2hvcnRjb2RlL3NlbmRlciBJRCBpcyBub3QgcmVnaXN0ZXJlZCB3aXRoIFRpbGlsJylcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+SoSBTb2x1dGlvbjogTG9nIGludG8geW91ciBUaWxpbCBkYXNoYm9hcmQgYW5kIHZlcmlmeSB5b3VyIGFwcHJvdmVkIHNlbmRlciBJRHMnKVxuICAgICAgICBjb25zb2xlLmVycm9yKCdDdXJyZW50IHNob3J0Y29kZTonLCBzaG9ydGNvZGUpXG4gICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSA9PT0gJzEwMDYnIHx8IHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSA9PT0gJzEwMTMnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyAgQVBJIEtFWSBFUlJPUjogVGhlIEFQSSBrZXkgaXMgaW52YWxpZCBvciBleHBpcmVkJylcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+SoSBTb2x1dGlvbjogVmVyaWZ5IHlvdXIgVElMSUxfQVBJX0tFWSBpbiAuZW52LmxvY2FsJylcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlID09PSAnMTAwMycpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4pqg77iPICBQSE9ORSBOVU1CRVIgRVJST1I6IEludmFsaWQgbW9iaWxlIG51bWJlciBmb3JtYXQnKVxuICAgICAgICBjb25zb2xlLmVycm9yKCdDdXJyZW50IG51bWJlcjonLCBmb3JtYXR0ZWRQaG9uZSlcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlID09PSAnMTAwNCcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4pqg77iPICBDUkVESVQgRVJST1I6IEluc3VmZmljaWVudCBTTVMgY3JlZGl0cycpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqEgU29sdXRpb246IFRvcCB1cCB5b3VyIFRpbGlsIGFjY291bnQnKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBMb2cgZmFpbGVkIFNNUyB0byBkYXRhYmFzZVxuICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc21zX2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgIHJlY2lwaWVudF9waG9uZTogdG8sXG4gICAgICAgICAgbWVzc2FnZV90eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgICBtZXNzYWdlX2NvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICByZXNwb25zZTogSlNPTi5zdHJpbmdpZnkocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTXNnIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBIVFRQIHN0YXR1c1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBUaWxpbCBTTVMgSFRUUCBlcnJvcjonLCByZXN1bHQpXG4gICAgICBcbiAgICAgIC8vIExvZyBmYWlsZWQgU01TXG4gICAgICBpZiAob3JkZXJJZCkge1xuICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdzbXNfbG9ncycpLmluc2VydCh7XG4gICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgcmVjaXBpZW50X3Bob25lOiB0byxcbiAgICAgICAgICBtZXNzYWdlX3R5cGU6ICdub3RpZmljYXRpb24nLFxuICAgICAgICAgIG1lc3NhZ2VfY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICAgIHJlc3BvbnNlOiBKU09OLnN0cmluZ2lmeShyZXN1bHQpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0Lm1lc3NhZ2UgfHwgJ1NNUyBzZW5kaW5nIGZhaWxlZCcgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdWNjZXNzIVxuICAgIGNvbnNvbGUubG9nKCfinIUgU01TIHNlbnQgc3VjY2Vzc2Z1bGx5IScpXG4gICAgY29uc29sZS5sb2coJ01lc3NhZ2UgSUQ6JywgcmVzcG9uc2VEYXRhLm1lc3NhZ2VfaWQpXG4gICAgY29uc29sZS5sb2coJ0NyZWRpdCBiYWxhbmNlOicsIHJlc3BvbnNlRGF0YS5jcmVkaXRfYmFsYW5jZSlcbiAgICBcbiAgICAvLyBMb2cgc3VjY2Vzc2Z1bCBTTVMgdG8gZGF0YWJhc2VcbiAgICBpZiAob3JkZXJJZCkge1xuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc21zX2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgcmVjaXBpZW50X3Bob25lOiB0byxcbiAgICAgICAgbWVzc2FnZV90eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgbWVzc2FnZV9jb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICAgICAgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICByZXNwb25zZTogSlNPTi5zdHJpbmdpZnkocmVzdWx0KVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTTVMgc2VuZGluZyBleGNlcHRpb246JywgZXJyb3IpXG4gICAgXG4gICAgLy8gTG9nIGZhaWxlZCBTTVNcbiAgICBpZiAob3JkZXJJZCkge1xuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc21zX2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgcmVjaXBpZW50X3Bob25lOiB0byxcbiAgICAgICAgbWVzc2FnZV90eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgbWVzc2FnZV9jb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICByZXNwb25zZTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwic2VuZFNNUyIsInRvIiwibWVzc2FnZSIsIm9yZGVySWQiLCJzbXNVcmwiLCJwcm9jZXNzIiwiZW52IiwiU01TX0VORFBPSU5UIiwiVElMSUxfU01TX1VSTCIsImFwaUtleSIsIlRJTElMX0FQSV9LRVkiLCJzaG9ydGNvZGUiLCJUSUxJTF9TSE9SVENPREUiLCJUSUxJTF9TRU5ERVJfSUQiLCJjb25zb2xlIiwid2FybiIsInN1Y2Nlc3MiLCJlcnJvciIsImZvcm1hdHRlZFBob25lIiwicmVwbGFjZSIsImxvZyIsInJlcXVlc3RCb2R5IiwiYXBpX2tleSIsInNlcnZpY2UiLCJtb2JpbGUiLCJyZXNwb25zZV90eXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInJlc3VsdCIsImpzb24iLCJzdGF0dXMiLCJyZXNwb25zZURhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJzdGF0dXNfY29kZSIsImVycm9yTXNnIiwic3RhdHVzX2Rlc2MiLCJmcm9tIiwiaW5zZXJ0Iiwib3JkZXJfaWQiLCJyZWNpcGllbnRfcGhvbmUiLCJtZXNzYWdlX3R5cGUiLCJtZXNzYWdlX2NvbnRlbnQiLCJvayIsIm1lc3NhZ2VfaWQiLCJjcmVkaXRfYmFsYW5jZSIsInNlbnRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/sms.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/supabase.ts":
/*!*****************************!*\
  !*** ./app/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nlet supabaseClient = null;\nfunction getSupabaseClient() {\n    if (supabaseClient) {\n        return supabaseClient;\n    }\n    try {\n        const supabaseUrl = \"https://moxqcjveracxuthydide.supabase.co\";\n        const supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1veHFjanZlcmFjeHV0aHlkaWRlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2ODQzODYzNSwiZXhwIjoyMDg0MDE0NjM1fQ.8lLOdRN8EfNC21Kj5a3RtGfICCCPYi4ZbkFbvDcDqEg\" || 0;\n        if (!supabaseUrl || !supabaseKey) {\n            console.warn(\"⚠️  Supabase environment variables not set. API calls will fail.\");\n            // Return a client with placeholder values to prevent crashes\n            supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://placeholder.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0\");\n            return supabaseClient;\n        }\n        supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n        return supabaseClient;\n    } catch (error) {\n        console.error(\"Error creating Supabase client:\", error);\n        // Return placeholder client to prevent app crash\n        supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://placeholder.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0\");\n        return supabaseClient;\n    }\n}\n// Export a default instance for backward compatibility\n// This is called at module load time, but getSupabaseClient handles errors gracefully\nconst supabase = getSupabaseClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRTtBQUVwRSxJQUFJQyxpQkFBd0M7QUFFckMsU0FBU0M7SUFDZCxJQUFJRCxnQkFBZ0I7UUFDbEIsT0FBT0E7SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNRSxjQUFjQywwQ0FBd0I7UUFDNUMsTUFBTUcsY0FBY0gsNk5BQXFDLElBQUlBLENBQTZCO1FBRTFGLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxhQUFhO1lBQ2hDRyxRQUFRQyxJQUFJLENBQUM7WUFDYiw2REFBNkQ7WUFDN0RWLGlCQUFpQkQsbUVBQVlBLENBQzNCLG1DQUNBO1lBRUYsT0FBT0M7UUFDVDtRQUVBQSxpQkFBaUJELG1FQUFZQSxDQUFDRyxhQUFhSTtRQUMzQyxPQUFPTjtJQUNULEVBQUUsT0FBT1csT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsbUNBQW1DQTtRQUNqRCxpREFBaUQ7UUFDakRYLGlCQUFpQkQsbUVBQVlBLENBQzNCLG1DQUNBO1FBRUYsT0FBT0M7SUFDVDtBQUNGO0FBRUEsdURBQXVEO0FBQ3ZELHNGQUFzRjtBQUMvRSxNQUFNWSxXQUFXWCxvQkFBbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaW11LWh1Yi8uL2FwcC9saWIvc3VwYWJhc2UudHM/OGQ5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQsIFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5sZXQgc3VwYWJhc2VDbGllbnQ6IFN1cGFiYXNlQ2xpZW50IHwgbnVsbCA9IG51bGxcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQ2xpZW50KCk6IFN1cGFiYXNlQ2xpZW50IHtcbiAgaWYgKHN1cGFiYXNlQ2xpZW50KSB7XG4gICAgcmV0dXJuIHN1cGFiYXNlQ2xpZW50XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMXG4gICAgY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZXG5cbiAgICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBub3Qgc2V0LiBBUEkgY2FsbHMgd2lsbCBmYWlsLicpXG4gICAgICAvLyBSZXR1cm4gYSBjbGllbnQgd2l0aCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gcHJldmVudCBjcmFzaGVzXG4gICAgICBzdXBhYmFzZUNsaWVudCA9IGNyZWF0ZUNsaWVudChcbiAgICAgICAgJ2h0dHBzOi8vcGxhY2Vob2xkZXIuc3VwYWJhc2UuY28nLFxuICAgICAgICAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlMxa1pXMXZJaXdpY205c1pTSTZJbUZ1YjI0aUxDSmxlSEFpT2pFNU9ETTRNVEk1T1RaOS5DUlhQMUE3V09lb0plWHhqTm5pNDNrZFF3Z25XTlJlaWxETWJsWVRuX0kwJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIHN1cGFiYXNlQ2xpZW50XG4gICAgfVxuXG4gICAgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KVxuICAgIHJldHVybiBzdXBhYmFzZUNsaWVudFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIFN1cGFiYXNlIGNsaWVudDonLCBlcnJvcilcbiAgICAvLyBSZXR1cm4gcGxhY2Vob2xkZXIgY2xpZW50IHRvIHByZXZlbnQgYXBwIGNyYXNoXG4gICAgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoXG4gICAgICAnaHR0cHM6Ly9wbGFjZWhvbGRlci5zdXBhYmFzZS5jbycsXG4gICAgICAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlMxa1pXMXZJaXdpY205c1pTSTZJbUZ1YjI0aUxDSmxlSEFpT2pFNU9ETTRNVEk1T1RaOS5DUlhQMUE3V09lb0plWHhqTm5pNDNrZFF3Z25XTlJlaWxETWJsWVRuX0kwJ1xuICAgIClcbiAgICByZXR1cm4gc3VwYWJhc2VDbGllbnRcbiAgfVxufVxuXG4vLyBFeHBvcnQgYSBkZWZhdWx0IGluc3RhbmNlIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4vLyBUaGlzIGlzIGNhbGxlZCBhdCBtb2R1bGUgbG9hZCB0aW1lLCBidXQgZ2V0U3VwYWJhc2VDbGllbnQgaGFuZGxlcyBlcnJvcnMgZ3JhY2VmdWxseVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlQ2xpZW50IiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJTVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCJzdXBhYmFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&page=%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2F%5Bid%5D%2Fstatus%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();