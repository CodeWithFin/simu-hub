"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/orders/route";
exports.ids = ["app/api/orders/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_finley_Finley_personal_simu_hub_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/orders/route.ts */ \"(rsc)/./app/api/orders/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/orders/route\",\n        pathname: \"/api/orders\",\n        filename: \"route\",\n        bundlePath: \"app/api/orders/route\"\n    },\n    resolvedPagePath: \"/home/finley/Finley-personal /simu-hub/app/api/orders/route.ts\",\n    nextConfigOutput,\n    userland: _home_finley_Finley_personal_simu_hub_app_api_orders_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/orders/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZvcmRlcnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm9yZGVycyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm9yZGVycyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGZmlubGV5JTJGRmlubGV5LXBlcnNvbmFsJTIwJTJGc2ltdS1odWIlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZmaW5sZXklMkZGaW5sZXktcGVyc29uYWwlMjAlMkZzaW11LWh1YiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDYztBQUMzRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbXUtaHViLz8zZDhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2ZpbmxleS9GaW5sZXktcGVyc29uYWwgL3NpbXUtaHViL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9vcmRlcnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9vcmRlcnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL29yZGVycy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2ZpbmxleS9GaW5sZXktcGVyc29uYWwgL3NpbXUtaHViL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9vcmRlcnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/orders/route.ts":
/*!*********************************!*\
  !*** ./app/api/orders/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/app/lib/supabase */ \"(rsc)/./app/lib/supabase.ts\");\n/* harmony import */ var _app_lib_sms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/app/lib/sms */ \"(rsc)/./app/lib/sms.ts\");\n\n\n\nconst generateOrderReference = ()=>{\n    return \"SH\" + Date.now().toString(36).toUpperCase() + Math.random().toString(36).substring(2, 7).toUpperCase();\n};\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        const { customerName, phone, email, productId, deliveryMethod, deliveryAddress } = body;\n        // Validation\n        if (!customerName || !phone || !productId || !deliveryMethod) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        if (deliveryMethod === \"doorstep\" && !deliveryAddress) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Delivery address required for doorstep delivery\"\n            }, {\n                status: 400\n            });\n        }\n        // Get or create customer\n        let { data: customer } = await _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"customers\").select(\"id\").eq(\"phone\", phone).single();\n        if (!customer) {\n            const { data: newCustomer, error: customerError } = await _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"customers\").insert({\n                name: customerName,\n                phone,\n                email\n            }).select().single();\n            if (customerError) throw customerError;\n            if (!newCustomer) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: false,\n                    error: \"Failed to create customer\"\n                }, {\n                    status: 500\n                });\n            }\n            customer = newCustomer;\n        }\n        // Ensure customer exists\n        if (!customer || !customer.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Failed to get or create customer\"\n            }, {\n                status: 500\n            });\n        }\n        // Get product details\n        const { data: product, error: productError } = await _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"products\").select(\"*\").eq(\"id\", productId).single();\n        if (productError || !product) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Product not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Create order\n        const orderReference = generateOrderReference();\n        const { data: order, error: orderError } = await _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"orders\").insert({\n            customer_id: customer.id,\n            product_id: productId,\n            delivery_method: deliveryMethod,\n            delivery_address: deliveryMethod === \"doorstep\" ? deliveryAddress : null,\n            order_reference: orderReference,\n            status: \"pending\"\n        }).select().single();\n        if (orderError) throw orderError;\n        // Send SMS to shop owner\n        const shopPhone = process.env.SHOP_PHONE;\n        if (shopPhone) {\n            const ownerMessage = `NEW ORDER #${orderReference}\nCustomer: ${customerName}\nPhone: ${phone}\nProduct: ${product.brand} ${product.model}\nDelivery: ${deliveryMethod === \"doorstep\" ? \"Doorstep\" : \"Pickup\"}\n${deliveryMethod === \"doorstep\" ? `Location: ${deliveryAddress}` : \"\"}\nView: ${\"http://localhost:3000\" || 0}/admin/orders/${order.id}`;\n            await (0,_app_lib_sms__WEBPACK_IMPORTED_MODULE_2__.sendSMS)(shopPhone, ownerMessage, order.id);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                ...order,\n                product,\n                customer: {\n                    name: customerName,\n                    phone,\n                    email\n                }\n            }\n        }, {\n            status: 201\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request) {\n    try {\n        const searchParams = request.nextUrl.searchParams;\n        const status = searchParams.get(\"status\");\n        const deliveryMethod = searchParams.get(\"deliveryMethod\");\n        const startDate = searchParams.get(\"startDate\");\n        const endDate = searchParams.get(\"endDate\");\n        const search = searchParams.get(\"search\");\n        let query = _app_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"orders\").select(`\n        *,\n        customers:customer_id (id, name, phone, email),\n        products:product_id (id, brand, model, price, image_url)\n      `).order(\"created_at\", {\n            ascending: false\n        });\n        if (status) {\n            query = query.eq(\"status\", status);\n        }\n        if (deliveryMethod) {\n            query = query.eq(\"delivery_method\", deliveryMethod);\n        }\n        if (startDate) {\n            query = query.gte(\"created_at\", startDate);\n        }\n        if (endDate) {\n            query = query.lte(\"created_at\", endDate);\n        }\n        const { data, error } = await query;\n        if (error) throw error;\n        // Filter by search if provided\n        let filteredData = data;\n        if (search) {\n            const searchLower = search.toLowerCase();\n            filteredData = data?.filter((order)=>order.order_reference?.toLowerCase().includes(searchLower) || order.customers?.name?.toLowerCase().includes(searchLower) || order.customers?.phone?.includes(search)) || [];\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: filteredData\n        });\n    } catch (error) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FBTzNDLE9BQVk7UUFDbkIsT0FBT3RCLHFEQUFZQSxDQUFDYyxJQUFJLENBQ3RCO1lBQUVPLFNBQVM7WUFBT0MsT0FBT0EsTUFBTStCLE9BQU87UUFBQyxHQUN2QztZQUFFOUIsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaW11LWh1Yi8uL2FwcC9hcGkvb3JkZXJzL3JvdXRlLnRzPzlmZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2FwcC9saWIvc3VwYWJhc2UnXG5pbXBvcnQgeyBzZW5kU01TIH0gZnJvbSAnQC9hcHAvbGliL3NtcydcblxuY29uc3QgZ2VuZXJhdGVPcmRlclJlZmVyZW5jZSA9ICgpID0+IHtcbiAgcmV0dXJuICdTSCcgKyBEYXRlLm5vdygpLnRvU3RyaW5nKDM2KS50b1VwcGVyQ2FzZSgpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDcpLnRvVXBwZXJDYXNlKClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IGN1c3RvbWVyTmFtZSwgcGhvbmUsIGVtYWlsLCBwcm9kdWN0SWQsIGRlbGl2ZXJ5TWV0aG9kLCBkZWxpdmVyeUFkZHJlc3MgfSA9IGJvZHlcbiAgICBcbiAgICAvLyBWYWxpZGF0aW9uXG4gICAgaWYgKCFjdXN0b21lck5hbWUgfHwgIXBob25lIHx8ICFwcm9kdWN0SWQgfHwgIWRlbGl2ZXJ5TWV0aG9kKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHMnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICBpZiAoZGVsaXZlcnlNZXRob2QgPT09ICdkb29yc3RlcCcgJiYgIWRlbGl2ZXJ5QWRkcmVzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0RlbGl2ZXJ5IGFkZHJlc3MgcmVxdWlyZWQgZm9yIGRvb3JzdGVwIGRlbGl2ZXJ5JyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IG9yIGNyZWF0ZSBjdXN0b21lclxuICAgIGxldCB7IGRhdGE6IGN1c3RvbWVyIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2N1c3RvbWVycycpXG4gICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAuZXEoJ3Bob25lJywgcGhvbmUpXG4gICAgICAuc2luZ2xlKClcbiAgICBcbiAgICBpZiAoIWN1c3RvbWVyKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IG5ld0N1c3RvbWVyLCBlcnJvcjogY3VzdG9tZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2N1c3RvbWVycycpXG4gICAgICAgIC5pbnNlcnQoeyBuYW1lOiBjdXN0b21lck5hbWUsIHBob25lLCBlbWFpbCB9KVxuICAgICAgICAuc2VsZWN0KClcbiAgICAgICAgLnNpbmdsZSgpXG4gICAgICBcbiAgICAgIGlmIChjdXN0b21lckVycm9yKSB0aHJvdyBjdXN0b21lckVycm9yXG4gICAgICBpZiAoIW5ld0N1c3RvbWVyKSB7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY3VzdG9tZXInIH0sXG4gICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGN1c3RvbWVyID0gbmV3Q3VzdG9tZXJcbiAgICB9XG4gICAgXG4gICAgLy8gRW5zdXJlIGN1c3RvbWVyIGV4aXN0c1xuICAgIGlmICghY3VzdG9tZXIgfHwgIWN1c3RvbWVyLmlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnRmFpbGVkIHRvIGdldCBvciBjcmVhdGUgY3VzdG9tZXInIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKVxuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgcHJvZHVjdCBkZXRhaWxzXG4gICAgY29uc3QgeyBkYXRhOiBwcm9kdWN0LCBlcnJvcjogcHJvZHVjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2R1Y3RzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIHByb2R1Y3RJZClcbiAgICAgIC5zaW5nbGUoKVxuICAgIFxuICAgIGlmIChwcm9kdWN0RXJyb3IgfHwgIXByb2R1Y3QpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdQcm9kdWN0IG5vdCBmb3VuZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApXG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBvcmRlclxuICAgIGNvbnN0IG9yZGVyUmVmZXJlbmNlID0gZ2VuZXJhdGVPcmRlclJlZmVyZW5jZSgpXG4gICAgY29uc3QgeyBkYXRhOiBvcmRlciwgZXJyb3I6IG9yZGVyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnb3JkZXJzJylcbiAgICAgIC5pbnNlcnQoe1xuICAgICAgICBjdXN0b21lcl9pZDogY3VzdG9tZXIuaWQsXG4gICAgICAgIHByb2R1Y3RfaWQ6IHByb2R1Y3RJZCxcbiAgICAgICAgZGVsaXZlcnlfbWV0aG9kOiBkZWxpdmVyeU1ldGhvZCxcbiAgICAgICAgZGVsaXZlcnlfYWRkcmVzczogZGVsaXZlcnlNZXRob2QgPT09ICdkb29yc3RlcCcgPyBkZWxpdmVyeUFkZHJlc3MgOiBudWxsLFxuICAgICAgICBvcmRlcl9yZWZlcmVuY2U6IG9yZGVyUmVmZXJlbmNlLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJ1xuICAgICAgfSlcbiAgICAgIC5zZWxlY3QoKVxuICAgICAgLnNpbmdsZSgpXG4gICAgXG4gICAgaWYgKG9yZGVyRXJyb3IpIHRocm93IG9yZGVyRXJyb3JcbiAgICBcbiAgICAvLyBTZW5kIFNNUyB0byBzaG9wIG93bmVyXG4gICAgY29uc3Qgc2hvcFBob25lID0gcHJvY2Vzcy5lbnYuU0hPUF9QSE9ORVxuICAgIGlmIChzaG9wUGhvbmUpIHtcbiAgICAgIGNvbnN0IG93bmVyTWVzc2FnZSA9IGBORVcgT1JERVIgIyR7b3JkZXJSZWZlcmVuY2V9XG5DdXN0b21lcjogJHtjdXN0b21lck5hbWV9XG5QaG9uZTogJHtwaG9uZX1cblByb2R1Y3Q6ICR7cHJvZHVjdC5icmFuZH0gJHtwcm9kdWN0Lm1vZGVsfVxuRGVsaXZlcnk6ICR7ZGVsaXZlcnlNZXRob2QgPT09ICdkb29yc3RlcCcgPyAnRG9vcnN0ZXAnIDogJ1BpY2t1cCd9XG4ke2RlbGl2ZXJ5TWV0aG9kID09PSAnZG9vcnN0ZXAnID8gYExvY2F0aW9uOiAke2RlbGl2ZXJ5QWRkcmVzc31gIDogJyd9XG5WaWV3OiAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQUF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCd9L2FkbWluL29yZGVycy8ke29yZGVyLmlkfWBcbiAgICAgIFxuICAgICAgYXdhaXQgc2VuZFNNUyhzaG9wUGhvbmUsIG93bmVyTWVzc2FnZSwgb3JkZXIuaWQpXG4gICAgfVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgZGF0YToge1xuICAgICAgICAuLi5vcmRlcixcbiAgICAgICAgcHJvZHVjdCxcbiAgICAgICAgY3VzdG9tZXI6IHsgbmFtZTogY3VzdG9tZXJOYW1lLCBwaG9uZSwgZW1haWwgfVxuICAgICAgfVxuICAgIH0sIHsgc3RhdHVzOiAyMDEgfSlcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHNlYXJjaFBhcmFtcyA9IHJlcXVlc3QubmV4dFVybC5zZWFyY2hQYXJhbXNcbiAgICBjb25zdCBzdGF0dXMgPSBzZWFyY2hQYXJhbXMuZ2V0KCdzdGF0dXMnKVxuICAgIGNvbnN0IGRlbGl2ZXJ5TWV0aG9kID0gc2VhcmNoUGFyYW1zLmdldCgnZGVsaXZlcnlNZXRob2QnKVxuICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ3N0YXJ0RGF0ZScpXG4gICAgY29uc3QgZW5kRGF0ZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ2VuZERhdGUnKVxuICAgIGNvbnN0IHNlYXJjaCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3NlYXJjaCcpXG4gICAgXG4gICAgbGV0IHF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdvcmRlcnMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGN1c3RvbWVyczpjdXN0b21lcl9pZCAoaWQsIG5hbWUsIHBob25lLCBlbWFpbCksXG4gICAgICAgIHByb2R1Y3RzOnByb2R1Y3RfaWQgKGlkLCBicmFuZCwgbW9kZWwsIHByaWNlLCBpbWFnZV91cmwpXG4gICAgICBgKVxuICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgXG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgcXVlcnkgPSBxdWVyeS5lcSgnc3RhdHVzJywgc3RhdHVzKVxuICAgIH1cbiAgICBcbiAgICBpZiAoZGVsaXZlcnlNZXRob2QpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuZXEoJ2RlbGl2ZXJ5X21ldGhvZCcsIGRlbGl2ZXJ5TWV0aG9kKVxuICAgIH1cbiAgICBcbiAgICBpZiAoc3RhcnREYXRlKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5Lmd0ZSgnY3JlYXRlZF9hdCcsIHN0YXJ0RGF0ZSlcbiAgICB9XG4gICAgXG4gICAgaWYgKGVuZERhdGUpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnkubHRlKCdjcmVhdGVkX2F0JywgZW5kRGF0ZSlcbiAgICB9XG4gICAgXG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgcXVlcnlcbiAgICBcbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yXG4gICAgXG4gICAgLy8gRmlsdGVyIGJ5IHNlYXJjaCBpZiBwcm92aWRlZFxuICAgIGxldCBmaWx0ZXJlZERhdGEgPSBkYXRhXG4gICAgaWYgKHNlYXJjaCkge1xuICAgICAgY29uc3Qgc2VhcmNoTG93ZXIgPSBzZWFyY2gudG9Mb3dlckNhc2UoKVxuICAgICAgZmlsdGVyZWREYXRhID0gZGF0YT8uZmlsdGVyKChvcmRlcjogYW55KSA9PiBcbiAgICAgICAgb3JkZXIub3JkZXJfcmVmZXJlbmNlPy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxuICAgICAgICBvcmRlci5jdXN0b21lcnM/Lm5hbWU/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XG4gICAgICAgIG9yZGVyLmN1c3RvbWVycz8ucGhvbmU/LmluY2x1ZGVzKHNlYXJjaClcbiAgICAgICkgfHwgW11cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogZmlsdGVyZWREYXRhIH0pXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic3VwYWJhc2UiLCJzZW5kU01TIiwiZ2VuZXJhdGVPcmRlclJlZmVyZW5jZSIsIkRhdGUiLCJub3ciLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwiTWF0aCIsInJhbmRvbSIsInN1YnN0cmluZyIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJjdXN0b21lck5hbWUiLCJwaG9uZSIsImVtYWlsIiwicHJvZHVjdElkIiwiZGVsaXZlcnlNZXRob2QiLCJkZWxpdmVyeUFkZHJlc3MiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJkYXRhIiwiY3VzdG9tZXIiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJuZXdDdXN0b21lciIsImN1c3RvbWVyRXJyb3IiLCJpbnNlcnQiLCJuYW1lIiwiaWQiLCJwcm9kdWN0IiwicHJvZHVjdEVycm9yIiwib3JkZXJSZWZlcmVuY2UiLCJvcmRlciIsIm9yZGVyRXJyb3IiLCJjdXN0b21lcl9pZCIsInByb2R1Y3RfaWQiLCJkZWxpdmVyeV9tZXRob2QiLCJkZWxpdmVyeV9hZGRyZXNzIiwib3JkZXJfcmVmZXJlbmNlIiwic2hvcFBob25lIiwicHJvY2VzcyIsImVudiIsIlNIT1BfUEhPTkUiLCJvd25lck1lc3NhZ2UiLCJicmFuZCIsIm1vZGVsIiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsIm1lc3NhZ2UiLCJHRVQiLCJzZWFyY2hQYXJhbXMiLCJuZXh0VXJsIiwiZ2V0Iiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInNlYXJjaCIsInF1ZXJ5IiwiYXNjZW5kaW5nIiwiZ3RlIiwibHRlIiwiZmlsdGVyZWREYXRhIiwic2VhcmNoTG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImZpbHRlciIsImluY2x1ZGVzIiwiY3VzdG9tZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/orders/route.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/sms.ts":
/*!************************!*\
  !*** ./app/lib/sms.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendSMS: () => (/* binding */ sendSMS)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(rsc)/./app/lib/supabase.ts\");\n\nconst sendSMS = async (to, message, orderId)=>{\n    try {\n        // Tilil API configuration\n        const smsUrl = process.env.SMS_ENDPOINT || process.env.TILIL_SMS_URL || \"https://api.tililtech.com/sms/v3/sendsms\";\n        const apiKey = process.env.TILIL_API_KEY;\n        const shortcode = process.env.TILIL_SHORTCODE || process.env.TILIL_SENDER_ID || \"SIMUHUB\";\n        if (!apiKey) {\n            console.warn(\"Tilil API key not configured. SMS not sent.\");\n            console.warn(\"Required: TILIL_API_KEY\");\n            return {\n                success: false,\n                error: \"SMS service not configured\"\n            };\n        }\n        // Format phone number - Tilil accepts multiple formats\n        // Remove + prefix if present (Tilil accepts local or international without +)\n        const formattedPhone = to.replace(/\\s+/g, \"\").replace(/^\\+/, \"\");\n        console.log(\"Sending SMS via Tilil to:\", formattedPhone);\n        console.log(\"Using endpoint:\", smsUrl);\n        console.log(\"Using shortcode:\", shortcode);\n        // Tilil API v3 request format (from official documentation)\n        const requestBody = {\n            api_key: apiKey,\n            service: 0,\n            mobile: formattedPhone,\n            response_type: \"json\",\n            shortcode: shortcode,\n            message: message // SMS content\n        };\n        console.log(\"Tilil SMS Request:\", JSON.stringify({\n            ...requestBody,\n            api_key: `${apiKey.substring(0, 10)}...`,\n            message: `${message.substring(0, 50)}...`\n        }, null, 2));\n        const response = await fetch(smsUrl, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(requestBody)\n        });\n        const result = await response.json();\n        console.log(\"Tilil SMS response status:\", response.status);\n        console.log(\"Tilil SMS response:\", JSON.stringify(result, null, 2));\n        // Tilil returns an array of results (even for single SMS)\n        const responseData = Array.isArray(result) ? result[0] : result;\n        // Check for error status codes\n        // 1000 or 1 = Success\n        // 1001 = Invalid sender name/shortcode\n        // 1003 = Invalid mobile number\n        // 1004 = Insufficient credits\n        // 1006 = Invalid credentials/API key\n        // 1013 = Invalid API key\n        if (responseData && responseData.status_code && responseData.status_code !== \"1000\" && responseData.status_code !== \"1\" && responseData.status_code !== 1000 && responseData.status_code !== 1) {\n            const errorMsg = responseData.status_desc || \"SMS sending failed\";\n            console.error(\"❌ Tilil SMS error:\", errorMsg);\n            console.error(\"Status code:\", responseData.status_code);\n            console.error(\"Full response:\", responseData);\n            // Provide helpful error messages\n            if (responseData.status_code === \"1001\") {\n                console.error(\"⚠️  SENDER ID ERROR: The shortcode/sender ID is not registered with Tilil\");\n                console.error(\"\\uD83D\\uDCA1 Solution: Log into your Tilil dashboard and verify your approved sender IDs\");\n                console.error(\"Current shortcode:\", shortcode);\n            } else if (responseData.status_code === \"1006\" || responseData.status_code === \"1013\") {\n                console.error(\"⚠️  API KEY ERROR: The API key is invalid or expired\");\n                console.error(\"\\uD83D\\uDCA1 Solution: Verify your TILIL_API_KEY in .env.local\");\n            } else if (responseData.status_code === \"1003\") {\n                console.error(\"⚠️  PHONE NUMBER ERROR: Invalid mobile number format\");\n                console.error(\"Current number:\", formattedPhone);\n            } else if (responseData.status_code === \"1004\") {\n                console.error(\"⚠️  CREDIT ERROR: Insufficient SMS credits\");\n                console.error(\"\\uD83D\\uDCA1 Solution: Top up your Tilil account\");\n            }\n            // Log failed SMS to database\n            if (orderId) {\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                    order_id: orderId,\n                    recipient_phone: to,\n                    message_type: \"notification\",\n                    message_content: message,\n                    status: \"failed\",\n                    response: JSON.stringify(result)\n                });\n            }\n            return {\n                success: false,\n                error: errorMsg\n            };\n        }\n        // Check HTTP status\n        if (!response.ok) {\n            console.error(\"❌ Tilil SMS HTTP error:\", result);\n            // Log failed SMS\n            if (orderId) {\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                    order_id: orderId,\n                    recipient_phone: to,\n                    message_type: \"notification\",\n                    message_content: message,\n                    status: \"failed\",\n                    response: JSON.stringify(result)\n                });\n            }\n            return {\n                success: false,\n                error: result.message || \"SMS sending failed\"\n            };\n        }\n        // Success!\n        console.log(\"✅ SMS sent successfully!\");\n        console.log(\"Message ID:\", responseData.message_id);\n        console.log(\"Credit balance:\", responseData.credit_balance);\n        // Log successful SMS to database\n        if (orderId) {\n            await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                order_id: orderId,\n                recipient_phone: to,\n                message_type: \"notification\",\n                message_content: message,\n                status: \"sent\",\n                sent_at: new Date().toISOString(),\n                response: JSON.stringify(result)\n            });\n        }\n        return {\n            success: true,\n            data: result\n        };\n    } catch (error) {\n        console.error(\"❌ SMS sending exception:\", error);\n        // Log failed SMS\n        if (orderId) {\n            await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"sms_logs\").insert({\n                order_id: orderId,\n                recipient_phone: to,\n                message_type: \"notification\",\n                message_content: message,\n                status: \"failed\",\n                response: JSON.stringify({\n                    error: error.message\n                })\n            });\n        }\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bERwQyxRQUFRTSxHQUFHLENBQUMsbUJBQW1CaUIsYUFBYWMsY0FBYztRQUUxRCxpQ0FBaUM7UUFDakMsSUFBSWhELFNBQVM7WUFDWCxNQUFNSiwrQ0FBUUEsQ0FBQzRDLElBQUksQ0FBQyxZQUFZQyxNQUFNLENBQUM7Z0JBQ3JDQyxVQUFVMUM7Z0JBQ1YyQyxpQkFBaUI3QztnQkFDakI4QyxjQUFjO2dCQUNkQyxpQkFBaUI5QztnQkFDakJrQyxRQUFRO2dCQUNSZ0IsU0FBUyxJQUFJQyxPQUFPQyxXQUFXO2dCQUMvQnpCLFVBQVVILEtBQUtDLFNBQVMsQ0FBQ087WUFDM0I7UUFDRjtRQUVBLE9BQU87WUFBRWxCLFNBQVM7WUFBTXVDLE1BQU1yQjtRQUFPO0lBQ3ZDLEVBQUUsT0FBT2pCLE9BQVk7UUFDbkJILFFBQVFHLEtBQUssQ0FBQyw0QkFBNEJBO1FBRTFDLGlCQUFpQjtRQUNqQixJQUFJZCxTQUFTO1lBQ1gsTUFBTUosK0NBQVFBLENBQUM0QyxJQUFJLENBQUMsWUFBWUMsTUFBTSxDQUFDO2dCQUNyQ0MsVUFBVTFDO2dCQUNWMkMsaUJBQWlCN0M7Z0JBQ2pCOEMsY0FBYztnQkFDZEMsaUJBQWlCOUM7Z0JBQ2pCa0MsUUFBUTtnQkFDUlAsVUFBVUgsS0FBS0MsU0FBUyxDQUFDO29CQUFFVixPQUFPQSxNQUFNZixPQUFPO2dCQUFDO1lBQ2xEO1FBQ0Y7UUFFQSxPQUFPO1lBQUVjLFNBQVM7WUFBT0MsT0FBT0EsTUFBTWYsT0FBTztRQUFDO0lBQ2hEO0FBQ0YsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NpbXUtaHViLy4vYXBwL2xpYi9zbXMudHM/Mjc1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJy4vc3VwYWJhc2UnXG5cbmV4cG9ydCBjb25zdCBzZW5kU01TID0gYXN5bmMgKHRvOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb3JkZXJJZD86IHN0cmluZykgPT4ge1xuICB0cnkge1xuICAgIC8vIFRpbGlsIEFQSSBjb25maWd1cmF0aW9uXG4gICAgY29uc3Qgc21zVXJsID0gcHJvY2Vzcy5lbnYuU01TX0VORFBPSU5UIHx8IHByb2Nlc3MuZW52LlRJTElMX1NNU19VUkwgfHwgJ2h0dHBzOi8vYXBpLnRpbGlsdGVjaC5jb20vc21zL3YzL3NlbmRzbXMnXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuVElMSUxfQVBJX0tFWVxuICAgIGNvbnN0IHNob3J0Y29kZSA9IHByb2Nlc3MuZW52LlRJTElMX1NIT1JUQ09ERSB8fCBwcm9jZXNzLmVudi5USUxJTF9TRU5ERVJfSUQgfHwgJ1NJTVVIVUInXG4gICAgXG4gICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgIGNvbnNvbGUud2FybignVGlsaWwgQVBJIGtleSBub3QgY29uZmlndXJlZC4gU01TIG5vdCBzZW50LicpXG4gICAgICBjb25zb2xlLndhcm4oJ1JlcXVpcmVkOiBUSUxJTF9BUElfS0VZJylcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1NNUyBzZXJ2aWNlIG5vdCBjb25maWd1cmVkJyB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZvcm1hdCBwaG9uZSBudW1iZXIgLSBUaWxpbCBhY2NlcHRzIG11bHRpcGxlIGZvcm1hdHNcbiAgICAvLyBSZW1vdmUgKyBwcmVmaXggaWYgcHJlc2VudCAoVGlsaWwgYWNjZXB0cyBsb2NhbCBvciBpbnRlcm5hdGlvbmFsIHdpdGhvdXQgKylcbiAgICBjb25zdCBmb3JtYXR0ZWRQaG9uZSA9IHRvLnJlcGxhY2UoL1xccysvZywgJycpLnJlcGxhY2UoL15cXCsvLCAnJylcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU2VuZGluZyBTTVMgdmlhIFRpbGlsIHRvOicsIGZvcm1hdHRlZFBob25lKVxuICAgIGNvbnNvbGUubG9nKCdVc2luZyBlbmRwb2ludDonLCBzbXNVcmwpXG4gICAgY29uc29sZS5sb2coJ1VzaW5nIHNob3J0Y29kZTonLCBzaG9ydGNvZGUpXG4gICAgXG4gICAgLy8gVGlsaWwgQVBJIHYzIHJlcXVlc3QgZm9ybWF0IChmcm9tIG9mZmljaWFsIGRvY3VtZW50YXRpb24pXG4gICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICBhcGlfa2V5OiBhcGlLZXksXG4gICAgICBzZXJ2aWNlOiAwLCAgICAgICAgICAgICAgICAgICAgLy8gMCA9IGJ1bGsgU01TIHNlcnZpY2VcbiAgICAgIG1vYmlsZTogZm9ybWF0dGVkUGhvbmUsICAgICAgICAvLyByZWNpcGllbnQgcGhvbmUgbnVtYmVyXG4gICAgICByZXNwb25zZV90eXBlOiBcImpzb25cIiwgICAgICAgICAvLyByZXNwb25zZSBmb3JtYXRcbiAgICAgIHNob3J0Y29kZTogc2hvcnRjb2RlLCAgICAgICAgICAvLyBzZW5kZXIgSUQvbmFtZVxuICAgICAgbWVzc2FnZTogbWVzc2FnZSAgICAgICAgICAgICAgIC8vIFNNUyBjb250ZW50XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdUaWxpbCBTTVMgUmVxdWVzdDonLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAuLi5yZXF1ZXN0Qm9keSxcbiAgICAgIGFwaV9rZXk6IGAke2FwaUtleS5zdWJzdHJpbmcoMCwgMTApfS4uLmAsXG4gICAgICBtZXNzYWdlOiBgJHttZXNzYWdlLnN1YnN0cmluZygwLCA1MCl9Li4uYFxuICAgIH0sIG51bGwsIDIpKVxuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goc21zVXJsLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSksXG4gICAgfSlcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBcbiAgICBjb25zb2xlLmxvZygnVGlsaWwgU01TIHJlc3BvbnNlIHN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpXG4gICAgY29uc29sZS5sb2coJ1RpbGlsIFNNUyByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShyZXN1bHQsIG51bGwsIDIpKVxuXG4gICAgLy8gVGlsaWwgcmV0dXJucyBhbiBhcnJheSBvZiByZXN1bHRzIChldmVuIGZvciBzaW5nbGUgU01TKVxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IEFycmF5LmlzQXJyYXkocmVzdWx0KSA/IHJlc3VsdFswXSA6IHJlc3VsdFxuICAgIFxuICAgIC8vIENoZWNrIGZvciBlcnJvciBzdGF0dXMgY29kZXNcbiAgICAvLyAxMDAwIG9yIDEgPSBTdWNjZXNzXG4gICAgLy8gMTAwMSA9IEludmFsaWQgc2VuZGVyIG5hbWUvc2hvcnRjb2RlXG4gICAgLy8gMTAwMyA9IEludmFsaWQgbW9iaWxlIG51bWJlclxuICAgIC8vIDEwMDQgPSBJbnN1ZmZpY2llbnQgY3JlZGl0c1xuICAgIC8vIDEwMDYgPSBJbnZhbGlkIGNyZWRlbnRpYWxzL0FQSSBrZXlcbiAgICAvLyAxMDEzID0gSW52YWxpZCBBUEkga2V5XG4gICAgaWYgKHJlc3BvbnNlRGF0YSAmJiByZXNwb25zZURhdGEuc3RhdHVzX2NvZGUgJiYgXG4gICAgICAgIHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSAhPT0gJzEwMDAnICYmIFxuICAgICAgICByZXNwb25zZURhdGEuc3RhdHVzX2NvZGUgIT09ICcxJyAmJlxuICAgICAgICByZXNwb25zZURhdGEuc3RhdHVzX2NvZGUgIT09IDEwMDAgJiZcbiAgICAgICAgcmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlICE9PSAxKSB7XG4gICAgICBcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gcmVzcG9uc2VEYXRhLnN0YXR1c19kZXNjIHx8ICdTTVMgc2VuZGluZyBmYWlsZWQnXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgVGlsaWwgU01TIGVycm9yOicsIGVycm9yTXNnKVxuICAgICAgY29uc29sZS5lcnJvcignU3RhdHVzIGNvZGU6JywgcmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlKVxuICAgICAgY29uc29sZS5lcnJvcignRnVsbCByZXNwb25zZTonLCByZXNwb25zZURhdGEpXG4gICAgICBcbiAgICAgIC8vIFByb3ZpZGUgaGVscGZ1bCBlcnJvciBtZXNzYWdlc1xuICAgICAgaWYgKHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSA9PT0gJzEwMDEnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyAgU0VOREVSIElEIEVSUk9SOiBUaGUgc2hvcnRjb2RlL3NlbmRlciBJRCBpcyBub3QgcmVnaXN0ZXJlZCB3aXRoIFRpbGlsJylcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+SoSBTb2x1dGlvbjogTG9nIGludG8geW91ciBUaWxpbCBkYXNoYm9hcmQgYW5kIHZlcmlmeSB5b3VyIGFwcHJvdmVkIHNlbmRlciBJRHMnKVxuICAgICAgICBjb25zb2xlLmVycm9yKCdDdXJyZW50IHNob3J0Y29kZTonLCBzaG9ydGNvZGUpXG4gICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSA9PT0gJzEwMDYnIHx8IHJlc3BvbnNlRGF0YS5zdGF0dXNfY29kZSA9PT0gJzEwMTMnKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KaoO+4jyAgQVBJIEtFWSBFUlJPUjogVGhlIEFQSSBrZXkgaXMgaW52YWxpZCBvciBleHBpcmVkJylcbiAgICAgICAgY29uc29sZS5lcnJvcign8J+SoSBTb2x1dGlvbjogVmVyaWZ5IHlvdXIgVElMSUxfQVBJX0tFWSBpbiAuZW52LmxvY2FsJylcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlID09PSAnMTAwMycpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4pqg77iPICBQSE9ORSBOVU1CRVIgRVJST1I6IEludmFsaWQgbW9iaWxlIG51bWJlciBmb3JtYXQnKVxuICAgICAgICBjb25zb2xlLmVycm9yKCdDdXJyZW50IG51bWJlcjonLCBmb3JtYXR0ZWRQaG9uZSlcbiAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2VEYXRhLnN0YXR1c19jb2RlID09PSAnMTAwNCcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4pqg77iPICBDUkVESVQgRVJST1I6IEluc3VmZmljaWVudCBTTVMgY3JlZGl0cycpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfkqEgU29sdXRpb246IFRvcCB1cCB5b3VyIFRpbGlsIGFjY291bnQnKVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBMb2cgZmFpbGVkIFNNUyB0byBkYXRhYmFzZVxuICAgICAgaWYgKG9yZGVySWQpIHtcbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc21zX2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgICAgIG9yZGVyX2lkOiBvcmRlcklkLFxuICAgICAgICAgIHJlY2lwaWVudF9waG9uZTogdG8sXG4gICAgICAgICAgbWVzc2FnZV90eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgICBtZXNzYWdlX2NvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgICAgc3RhdHVzOiAnZmFpbGVkJyxcbiAgICAgICAgICByZXNwb25zZTogSlNPTi5zdHJpbmdpZnkocmVzdWx0KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgXG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yTXNnIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBIVFRQIHN0YXR1c1xuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBUaWxpbCBTTVMgSFRUUCBlcnJvcjonLCByZXN1bHQpXG4gICAgICBcbiAgICAgIC8vIExvZyBmYWlsZWQgU01TXG4gICAgICBpZiAob3JkZXJJZCkge1xuICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdzbXNfbG9ncycpLmluc2VydCh7XG4gICAgICAgICAgb3JkZXJfaWQ6IG9yZGVySWQsXG4gICAgICAgICAgcmVjaXBpZW50X3Bob25lOiB0byxcbiAgICAgICAgICBtZXNzYWdlX3R5cGU6ICdub3RpZmljYXRpb24nLFxuICAgICAgICAgIG1lc3NhZ2VfY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICAgIHJlc3BvbnNlOiBKU09OLnN0cmluZ2lmeShyZXN1bHQpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogcmVzdWx0Lm1lc3NhZ2UgfHwgJ1NNUyBzZW5kaW5nIGZhaWxlZCcgfVxuICAgIH1cbiAgICBcbiAgICAvLyBTdWNjZXNzIVxuICAgIGNvbnNvbGUubG9nKCfinIUgU01TIHNlbnQgc3VjY2Vzc2Z1bGx5IScpXG4gICAgY29uc29sZS5sb2coJ01lc3NhZ2UgSUQ6JywgcmVzcG9uc2VEYXRhLm1lc3NhZ2VfaWQpXG4gICAgY29uc29sZS5sb2coJ0NyZWRpdCBiYWxhbmNlOicsIHJlc3BvbnNlRGF0YS5jcmVkaXRfYmFsYW5jZSlcbiAgICBcbiAgICAvLyBMb2cgc3VjY2Vzc2Z1bCBTTVMgdG8gZGF0YWJhc2VcbiAgICBpZiAob3JkZXJJZCkge1xuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc21zX2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgcmVjaXBpZW50X3Bob25lOiB0byxcbiAgICAgICAgbWVzc2FnZV90eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgbWVzc2FnZV9jb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBzdGF0dXM6ICdzZW50JyxcbiAgICAgICAgc2VudF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICByZXNwb25zZTogSlNPTi5zdHJpbmdpZnkocmVzdWx0KVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogcmVzdWx0IH1cbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBTTVMgc2VuZGluZyBleGNlcHRpb246JywgZXJyb3IpXG4gICAgXG4gICAgLy8gTG9nIGZhaWxlZCBTTVNcbiAgICBpZiAob3JkZXJJZCkge1xuICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnc21zX2xvZ3MnKS5pbnNlcnQoe1xuICAgICAgICBvcmRlcl9pZDogb3JkZXJJZCxcbiAgICAgICAgcmVjaXBpZW50X3Bob25lOiB0byxcbiAgICAgICAgbWVzc2FnZV90eXBlOiAnbm90aWZpY2F0aW9uJyxcbiAgICAgICAgbWVzc2FnZV9jb250ZW50OiBtZXNzYWdlLFxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICByZXNwb25zZTogSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KVxuICAgICAgfSlcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvci5tZXNzYWdlIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwic2VuZFNNUyIsInRvIiwibWVzc2FnZSIsIm9yZGVySWQiLCJzbXNVcmwiLCJwcm9jZXNzIiwiZW52IiwiU01TX0VORFBPSU5UIiwiVElMSUxfU01TX1VSTCIsImFwaUtleSIsIlRJTElMX0FQSV9LRVkiLCJzaG9ydGNvZGUiLCJUSUxJTF9TSE9SVENPREUiLCJUSUxJTF9TRU5ERVJfSUQiLCJjb25zb2xlIiwid2FybiIsInN1Y2Nlc3MiLCJlcnJvciIsImZvcm1hdHRlZFBob25lIiwicmVwbGFjZSIsImxvZyIsInJlcXVlc3RCb2R5IiwiYXBpX2tleSIsInNlcnZpY2UiLCJtb2JpbGUiLCJyZXNwb25zZV90eXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN1YnN0cmluZyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsInJlc3VsdCIsImpzb24iLCJzdGF0dXMiLCJyZXNwb25zZURhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJzdGF0dXNfY29kZSIsImVycm9yTXNnIiwic3RhdHVzX2Rlc2MiLCJmcm9tIiwiaW5zZXJ0Iiwib3JkZXJfaWQiLCJyZWNpcGllbnRfcGhvbmUiLCJtZXNzYWdlX3R5cGUiLCJtZXNzYWdlX2NvbnRlbnQiLCJvayIsIm1lc3NhZ2VfaWQiLCJjcmVkaXRfYmFsYW5jZSIsInNlbnRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/sms.ts\n");

/***/ }),

/***/ "(rsc)/./app/lib/supabase.ts":
/*!*****************************!*\
  !*** ./app/lib/supabase.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient),\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/index.mjs\");\n\nlet supabaseClient = null;\nfunction getSupabaseClient() {\n    if (supabaseClient) {\n        return supabaseClient;\n    }\n    try {\n        const supabaseUrl = \"https://moxqcjveracxuthydide.supabase.co\";\n        const supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1veHFjanZlcmFjeHV0aHlkaWRlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2ODQzODYzNSwiZXhwIjoyMDg0MDE0NjM1fQ.8lLOdRN8EfNC21Kj5a3RtGfICCCPYi4ZbkFbvDcDqEg\" || 0;\n        if (!supabaseUrl || !supabaseKey) {\n            console.warn(\"⚠️  Supabase environment variables not set. API calls will fail.\");\n            // Return a client with placeholder values to prevent crashes\n            supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://placeholder.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0\");\n            return supabaseClient;\n        }\n        supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n        return supabaseClient;\n    } catch (error) {\n        console.error(\"Error creating Supabase client:\", error);\n        // Return placeholder client to prevent app crash\n        supabaseClient = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://placeholder.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0\");\n        return supabaseClient;\n    }\n}\n// Export a default instance for backward compatibility\n// This is called at module load time, but getSupabaseClient handles errors gracefully\nconst supabase = getSupabaseClient();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGliL3N1cGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFvRTtBQUVwRSxJQUFJQyxpQkFBd0M7QUFFckMsU0FBU0M7SUFDZCxJQUFJRCxnQkFBZ0I7UUFDbEIsT0FBT0E7SUFDVDtJQUVBLElBQUk7UUFDRixNQUFNRSxjQUFjQywwQ0FBd0I7UUFDNUMsTUFBTUcsY0FBY0gsNk5BQXFDLElBQUlBLENBQTZCO1FBRTFGLElBQUksQ0FBQ0QsZUFBZSxDQUFDSSxhQUFhO1lBQ2hDRyxRQUFRQyxJQUFJLENBQUM7WUFDYiw2REFBNkQ7WUFDN0RWLGlCQUFpQkQsbUVBQVlBLENBQzNCLG1DQUNBO1lBRUYsT0FBT0M7UUFDVDtRQUVBQSxpQkFBaUJELG1FQUFZQSxDQUFDRyxhQUFhSTtRQUMzQyxPQUFPTjtJQUNULEVBQUUsT0FBT1csT0FBTztRQUNkRixRQUFRRSxLQUFLLENBQUMsbUNBQW1DQTtRQUNqRCxpREFBaUQ7UUFDakRYLGlCQUFpQkQsbUVBQVlBLENBQzNCLG1DQUNBO1FBRUYsT0FBT0M7SUFDVDtBQUNGO0FBRUEsdURBQXVEO0FBQ3ZELHNGQUFzRjtBQUMvRSxNQUFNWSxXQUFXWCxvQkFBbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaW11LWh1Yi8uL2FwcC9saWIvc3VwYWJhc2UudHM/OGQ5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQsIFN1cGFiYXNlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xuXG5sZXQgc3VwYWJhc2VDbGllbnQ6IFN1cGFiYXNlQ2xpZW50IHwgbnVsbCA9IG51bGxcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQ2xpZW50KCk6IFN1cGFiYXNlQ2xpZW50IHtcbiAgaWYgKHN1cGFiYXNlQ2xpZW50KSB7XG4gICAgcmV0dXJuIHN1cGFiYXNlQ2xpZW50XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMXG4gICAgY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX0FOT05fS0VZXG5cbiAgICBpZiAoIXN1cGFiYXNlVXJsIHx8ICFzdXBhYmFzZUtleSkge1xuICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBub3Qgc2V0LiBBUEkgY2FsbHMgd2lsbCBmYWlsLicpXG4gICAgICAvLyBSZXR1cm4gYSBjbGllbnQgd2l0aCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gcHJldmVudCBjcmFzaGVzXG4gICAgICBzdXBhYmFzZUNsaWVudCA9IGNyZWF0ZUNsaWVudChcbiAgICAgICAgJ2h0dHBzOi8vcGxhY2Vob2xkZXIuc3VwYWJhc2UuY28nLFxuICAgICAgICAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlMxa1pXMXZJaXdpY205c1pTSTZJbUZ1YjI0aUxDSmxlSEFpT2pFNU9ETTRNVEk1T1RaOS5DUlhQMUE3V09lb0plWHhqTm5pNDNrZFF3Z25XTlJlaWxETWJsWVRuX0kwJ1xuICAgICAgKVxuICAgICAgcmV0dXJuIHN1cGFiYXNlQ2xpZW50XG4gICAgfVxuXG4gICAgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlS2V5KVxuICAgIHJldHVybiBzdXBhYmFzZUNsaWVudFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIFN1cGFiYXNlIGNsaWVudDonLCBlcnJvcilcbiAgICAvLyBSZXR1cm4gcGxhY2Vob2xkZXIgY2xpZW50IHRvIHByZXZlbnQgYXBwIGNyYXNoXG4gICAgc3VwYWJhc2VDbGllbnQgPSBjcmVhdGVDbGllbnQoXG4gICAgICAnaHR0cHM6Ly9wbGFjZWhvbGRlci5zdXBhYmFzZS5jbycsXG4gICAgICAnZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBjM01pT2lKemRYQmhZbUZ6WlMxa1pXMXZJaXdpY205c1pTSTZJbUZ1YjI0aUxDSmxlSEFpT2pFNU9ETTRNVEk1T1RaOS5DUlhQMUE3V09lb0plWHhqTm5pNDNrZFF3Z25XTlJlaWxETWJsWVRuX0kwJ1xuICAgIClcbiAgICByZXR1cm4gc3VwYWJhc2VDbGllbnRcbiAgfVxufVxuXG4vLyBFeHBvcnQgYSBkZWZhdWx0IGluc3RhbmNlIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4vLyBUaGlzIGlzIGNhbGxlZCBhdCBtb2R1bGUgbG9hZCB0aW1lLCBidXQgZ2V0U3VwYWJhc2VDbGllbnQgaGFuZGxlcyBlcnJvcnMgZ3JhY2VmdWxseVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VDbGllbnQoKVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlQ2xpZW50IiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJTVVBBQkFTRV9BTk9OX0tFWSIsImNvbnNvbGUiLCJ3YXJuIiwiZXJyb3IiLCJzdXBhYmFzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tslib","vendor-chunks/iceberg-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Forders%2Froute&page=%2Fapi%2Forders%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Forders%2Froute.ts&appDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Ffinley%2FFinley-personal%20%2Fsimu-hub&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();