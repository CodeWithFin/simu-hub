"use strict";(()=>{var e={};e.id=39,e.ids=[39],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2879:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>m,requestAsyncStorage:()=>p,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>I});var a={};r.r(a),r.d(a,{GET:()=>u,POST:()=>l});var n=r(9303),s=r(8716),i=r(670),c=r(7070),o=r(9145);async function l(e){try{let{name:t,email:r,phone:a,message:n,rating:s}=await e.json();if(!t||!n)return c.NextResponse.json({success:!1,error:"Name and message are required"},{status:400});let{data:i,error:l}=await o.O.from("general_feedback").insert({name:t,email:r||null,phone:a||null,message:n,rating:s||null}).select().single();if(l)throw l;return c.NextResponse.json({success:!0,data:i},{status:201})}catch(e){return console.error("Error submitting general feedback:",e),c.NextResponse.json({success:!1,error:e.message||"Failed to submit feedback"},{status:500})}}async function u(e){try{let t=e.nextUrl.searchParams,r=t.get("rating"),a=t.get("startDate"),n=t.get("endDate"),s=o.O.from("general_feedback").select("*").order("created_at",{ascending:!1});r&&(s=s.gte("rating",parseInt(r))),a&&(s=s.gte("created_at",a)),n&&(s=s.lte("created_at",n));let{data:i,error:l}=await s;if(l)throw l;let u=i&&i.length>0?i.filter(e=>e.rating).reduce((e,t)=>e+(t.rating||0),0)/i.filter(e=>e.rating).length:0;return c.NextResponse.json({success:!0,data:i,averageRating:u>0?u.toFixed(2):"N/A",total:i.length})}catch(e){return console.error("Error fetching general feedback:",e),c.NextResponse.json({success:!1,error:e.message||"Failed to fetch feedback"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/general-feedback/route",pathname:"/api/general-feedback",filename:"route",bundlePath:"app/api/general-feedback/route"},resolvedPagePath:"/home/finley/Finley-personal /simu-hub/app/api/general-feedback/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:p,staticGenerationAsyncStorage:I,serverHooks:g}=d,h="/api/general-feedback/route";function m(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:I})}},9145:(e,t,r)=>{r.d(t,{O:()=>s});var a=r(7857);let n=null,s=function(){if(n)return n;try{let e="https://moxqcjveracxuthydide.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1veHFjanZlcmFjeHV0aHlkaWRlIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2ODQzODYzNSwiZXhwIjoyMDg0MDE0NjM1fQ.8lLOdRN8EfNC21Kj5a3RtGfICCCPYi4ZbkFbvDcDqEg";if(!e||!t)return console.warn("⚠️  Supabase environment variables not set. API calls will fail."),n=(0,a.eI)("https://placeholder.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0");return n=(0,a.eI)(e,t)}catch(e){return console.error("Error creating Supabase client:",e),n=(0,a.eI)("https://placeholder.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0")}}()}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,564],()=>r(2879));module.exports=a})();