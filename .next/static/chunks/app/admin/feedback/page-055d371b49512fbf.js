(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{4550:function(e,t,a){Promise.resolve().then(a.bind(a,3406))},3406:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(7437),s=a(2265),i=a(9376),d=a(7648);function l(){let e=(0,i.useRouter)(),[t,a]=(0,s.useState)(!0),[l,n]=(0,s.useState)(null),[o,c]=(0,s.useState)({rating:"",startDate:"",endDate:""});(0,s.useEffect)(()=>{if(!localStorage.getItem("adminToken")){e.push("/admin/login");return}x()},[e]),(0,s.useEffect)(()=>{x()},[o]);let x=async()=>{a(!0);try{let e=localStorage.getItem("adminToken"),t=new URLSearchParams;o.rating&&t.append("rating",o.rating),o.startDate&&t.append("startDate",o.startDate),o.endDate&&t.append("endDate",o.endDate);let a=await fetch("/api/feedback?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}}),r=await a.json();r.success&&n(r)}catch(e){console.error("Failed to load feedback:",e)}finally{a(!1)}},m=e=>{let t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},u=e=>(0,r.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,r.jsx)("span",{className:t<=e?"text-beige":"text-white/20",children:"â­"},t))});return(0,r.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,r.jsx)("nav",{className:"fixed top-0 w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/5",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 md:px-12 h-20 flex items-center justify-between",children:[(0,r.jsxs)(d.default,{href:"/",className:"text-lg font-bold tracking-tighter uppercase font-display group",children:["Simu",(0,r.jsx)("span",{className:"text-beige text-xs align-top ml-1 opacity-80 group-hover:text-white transition-colors",children:"Hub"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-6",children:[(0,r.jsx)(d.default,{href:"/admin",className:"text-sm text-gray-400 hover:text-beige transition-colors",children:"Orders"}),(0,r.jsx)("span",{className:"text-sm text-beige",children:"Order Feedback"}),(0,r.jsx)(d.default,{href:"/admin/general-feedback",className:"text-sm text-gray-400 hover:text-beige transition-colors",children:"General Feedback"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),e.push("/admin/login")},className:"border border-white/20 px-4 py-2 text-sm uppercase tracking-wide hover:border-beige hover:text-beige transition-colors",children:"Logout"})]})]})}),(0,r.jsx)("div",{className:"pt-20 pb-20",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-6 md:px-12",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-12",children:[(0,r.jsx)("h1",{className:"font-display text-4xl md:text-5xl uppercase font-bold tracking-tighter mb-4 md:mb-0",children:"Customer Feedback"}),(0,r.jsx)("button",{onClick:()=>{if(!l||!l.data||0===l.data.length){alert("No feedback data to export");return}let e=new Blob([[["Order ID","Product","Date","Overall Rating","Product Rating","Delivery Rating","Would Recommend","Comments"],...l.data.map(e=>{var t,a,r,s,i;return[(null===(t=e.orders)||void 0===t?void 0:t.order_reference)||"N/A","".concat((null===(r=e.orders)||void 0===r?void 0:null===(a=r.products)||void 0===a?void 0:a.brand)||""," ").concat((null===(i=e.orders)||void 0===i?void 0:null===(s=i.products)||void 0===s?void 0:s.model)||"").trim(),new Date(e.created_at).toLocaleDateString(),e.overall_rating,e.product_rating,e.delivery_rating,null===e.would_recommend?"N/A":e.would_recommend?"Yes":"No",e.comments?'"'.concat(e.comments.replace(/"/g,'""'),'"'):""]})].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="feedback-export-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)},disabled:!(null==l?void 0:l.data)||0===l.data.length,className:"bg-beige text-black px-6 py-3 text-sm font-bold uppercase tracking-wide hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Export to CSV"})]}),l&&l.data.length>0&&(0,r.jsxs)("section",{className:"mb-12",children:[(0,r.jsx)("h2",{className:"font-display text-xl uppercase font-bold tracking-tight mb-6",children:"Average Ratings"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[(0,r.jsx)("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-4",children:"Overall Experience"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-4xl font-display font-bold text-beige",children:l.averages.overall}),u(Math.round(parseFloat(l.averages.overall)))]})]}),(0,r.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[(0,r.jsx)("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-4",children:"Product Satisfaction"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-4xl font-display font-bold text-beige",children:l.averages.product}),u(Math.round(parseFloat(l.averages.product)))]})]}),(0,r.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[(0,r.jsx)("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-4",children:"Delivery Experience"}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-4xl font-display font-bold text-beige",children:l.averages.delivery}),u(Math.round(parseFloat(l.averages.delivery)))]})]})]})]}),(0,r.jsx)("section",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsxs)("select",{value:o.rating,onChange:e=>c({...o,rating:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",children:[(0,r.jsx)("option",{value:"",children:"All Ratings"}),(0,r.jsx)("option",{value:"5",children:"5 Stars"}),(0,r.jsx)("option",{value:"4",children:"4+ Stars"}),(0,r.jsx)("option",{value:"3",children:"3+ Stars"}),(0,r.jsx)("option",{value:"2",children:"2+ Stars"}),(0,r.jsx)("option",{value:"1",children:"1+ Stars"})]}),(0,r.jsx)("input",{type:"date",value:o.startDate,onChange:e=>c({...o,startDate:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",placeholder:"Start Date"}),(0,r.jsx)("input",{type:"date",value:o.endDate,onChange:e=>c({...o,endDate:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",placeholder:"End Date"}),(0,r.jsx)("button",{onClick:()=>c({rating:"",startDate:"",endDate:""}),className:"border border-white/20 px-6 py-3 text-sm uppercase tracking-wide hover:border-beige hover:text-beige transition-colors",children:"Clear Filters"})]})}),(0,r.jsxs)("section",{className:"bg-offblack border border-white/10",children:[(0,r.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,r.jsxs)("h2",{className:"font-display text-xl uppercase font-bold tracking-tight",children:["Recent Feedback (",(null==l?void 0:l.data.length)||0,")"]})}),t?(0,r.jsx)("div",{className:"flex justify-center py-20",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-beige"})}):l&&0!==l.data.length?(0,r.jsx)("div",{className:"divide-y divide-white/10",children:l.data.map(e=>{var t,a,s,i,d;return(0,r.jsxs)("div",{className:"p-6 hover:bg-white/5 transition-colors",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsxs)("h3",{className:"font-bold text-lg",children:[null===(a=e.orders)||void 0===a?void 0:null===(t=a.products)||void 0===t?void 0:t.brand," ",null===(i=e.orders)||void 0===i?void 0:null===(s=i.products)||void 0===s?void 0:s.model]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500 font-mono",children:["Order #",null===(d=e.orders)||void 0===d?void 0:d.order_reference]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:m(e.created_at)})]}),null!==e.would_recommend&&(0,r.jsx)("div",{className:"px-3 py-1 text-xs uppercase tracking-wide ".concat(e.would_recommend?"bg-beige/20 text-beige border border-beige/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:e.would_recommend?"Would Recommend":"Would Not Recommend"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Overall"}),u(e.overall_rating)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Product"}),u(e.product_rating)]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Delivery"}),u(e.delivery_rating)]})]}),e.comments&&(0,r.jsxs)("div",{className:"bg-black/30 p-4 border border-white/5 mt-4",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Comments"}),(0,r.jsx)("p",{className:"text-gray-300 leading-relaxed",children:e.comments})]})]},e.id)})}):(0,r.jsxs)("div",{className:"p-12 text-center text-gray-400",children:[(0,r.jsx)("p",{className:"text-lg mb-2",children:"No feedback received yet"}),(0,r.jsx)("p",{className:"text-sm",children:"Feedback will appear here once customers submit their reviews"})]})]})]})})]})}},9376:function(e,t,a){"use strict";var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=4550)}),_N_E=e.O()}]);