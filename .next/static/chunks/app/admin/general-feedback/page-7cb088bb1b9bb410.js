(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[450],{3874:function(e,t,a){Promise.resolve().then(a.bind(a,4817))},4817:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var s=a(7437),r=a(2265),i=a(9376),l=a(7648);function n(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!0),[n,d]=(0,r.useState)(null),[c,o]=(0,r.useState)({rating:"",startDate:"",endDate:""});(0,r.useEffect)(()=>{if(!localStorage.getItem("adminToken")){e.push("/admin/login");return}x()},[e]),(0,r.useEffect)(()=>{x()},[c]);let x=async()=>{a(!0);try{let e=localStorage.getItem("adminToken"),t=new URLSearchParams;c.rating&&t.append("rating",c.rating),c.startDate&&t.append("startDate",c.startDate),c.endDate&&t.append("endDate",c.endDate);let a=await fetch("/api/general-feedback?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}}),s=await a.json();s.success&&d(s)}catch(e){console.error("Failed to load general feedback:",e)}finally{a(!1)}},m=e=>{let t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},h=e=>e?(0,s.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>(0,s.jsx)("span",{className:t<=e?"text-beige":"text-white/20",children:"â­"},t))}):(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:"No rating"});return(0,s.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,s.jsx)("nav",{className:"fixed top-0 w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/5",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 md:px-12 h-20 flex items-center justify-between",children:[(0,s.jsxs)(l.default,{href:"/",className:"text-lg font-bold tracking-tighter uppercase font-display group",children:["Simu",(0,s.jsx)("span",{className:"text-beige text-xs align-top ml-1 opacity-80 group-hover:text-white transition-colors",children:"Hub"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsx)(l.default,{href:"/admin",className:"text-sm text-gray-400 hover:text-beige transition-colors",children:"Orders"}),(0,s.jsx)(l.default,{href:"/admin/feedback",className:"text-sm text-gray-400 hover:text-beige transition-colors",children:"Order Feedback"}),(0,s.jsx)("span",{className:"text-sm text-beige",children:"General Feedback"}),(0,s.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),e.push("/admin/login")},className:"border border-white/20 px-4 py-2 text-sm uppercase tracking-wide hover:border-beige hover:text-beige transition-colors",children:"Logout"})]})]})}),(0,s.jsx)("div",{className:"pt-20 pb-20",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 md:px-12",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-12",children:[(0,s.jsx)("h1",{className:"font-display text-4xl md:text-5xl uppercase font-bold tracking-tighter mb-4 md:mb-0",children:"General Feedback"}),(0,s.jsx)("button",{onClick:()=>{if(!n||!n.data||0===n.data.length){alert("No feedback data to export");return}let e=new Blob([[["Name","Email","Phone","Rating","Date","Message"],...n.data.map(e=>[e.name,e.email||"N/A",e.phone||"N/A",e.rating||"N/A",new Date(e.created_at).toLocaleDateString(),e.message?'"'.concat(e.message.replace(/"/g,'""'),'"'):""])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="general-feedback-export-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)},disabled:!(null==n?void 0:n.data)||0===n.data.length,className:"bg-beige text-black px-6 py-3 text-sm font-bold uppercase tracking-wide hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Export to CSV"})]}),n&&n.data.length>0&&(0,s.jsx)("section",{className:"mb-12",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[(0,s.jsx)("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-4",children:"Total Submissions"}),(0,s.jsx)("div",{className:"text-4xl font-display font-bold text-beige",children:n.total})]}),(0,s.jsxs)("div",{className:"bg-offblack p-6 border border-white/10",children:[(0,s.jsx)("div",{className:"text-xs font-mono text-beige uppercase tracking-wide mb-4",children:"Average Rating"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"text-4xl font-display font-bold text-beige",children:n.averageRating}),"N/A"!==n.averageRating&&h(Math.round(parseFloat(n.averageRating)))]})]})]})}),(0,s.jsx)("section",{className:"mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsxs)("select",{value:c.rating,onChange:e=>o({...c,rating:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",children:[(0,s.jsx)("option",{value:"",children:"All Ratings"}),(0,s.jsx)("option",{value:"5",children:"5 Stars"}),(0,s.jsx)("option",{value:"4",children:"4+ Stars"}),(0,s.jsx)("option",{value:"3",children:"3+ Stars"}),(0,s.jsx)("option",{value:"2",children:"2+ Stars"}),(0,s.jsx)("option",{value:"1",children:"1+ Stars"})]}),(0,s.jsx)("input",{type:"date",value:c.startDate,onChange:e=>o({...c,startDate:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",placeholder:"Start Date"}),(0,s.jsx)("input",{type:"date",value:c.endDate,onChange:e=>o({...c,endDate:e.target.value}),className:"bg-offblack border border-white/10 px-4 py-3 text-white custom-input",placeholder:"End Date"}),(0,s.jsx)("button",{onClick:()=>o({rating:"",startDate:"",endDate:""}),className:"border border-white/20 px-6 py-3 text-sm uppercase tracking-wide hover:border-beige hover:text-beige transition-colors",children:"Clear Filters"})]})}),(0,s.jsxs)("section",{className:"bg-offblack border border-white/10",children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsxs)("h2",{className:"font-display text-xl uppercase font-bold tracking-tight",children:["All Submissions (",(null==n?void 0:n.total)||0,")"]})}),t?(0,s.jsx)("div",{className:"flex justify-center py-20",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-beige"})}):n&&0!==n.data.length?(0,s.jsx)("div",{className:"divide-y divide-white/10",children:n.data.map(e=>(0,s.jsxs)("div",{className:"p-6 hover:bg-white/5 transition-colors",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-1",children:e.name}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 text-sm text-gray-400",children:[e.email&&(0,s.jsxs)("span",{children:["Email: ",e.email]}),e.phone&&(0,s.jsxs)("span",{children:["Phone: ",e.phone]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:m(e.created_at)})]})]}),(0,s.jsx)("div",{children:h(e.rating)})]}),(0,s.jsxs)("div",{className:"bg-black/30 p-4 border border-white/5",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Message"}),(0,s.jsx)("p",{className:"text-gray-300 leading-relaxed",children:e.message})]})]},e.id))}):(0,s.jsxs)("div",{className:"p-12 text-center text-gray-400",children:[(0,s.jsx)("p",{className:"text-lg mb-2",children:"No feedback received yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Feedback will appear here once visitors submit their reviews"})]})]})]})})]})}},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=3874)}),_N_E=e.O()}]);